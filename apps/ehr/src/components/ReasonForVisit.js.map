{"version":3,"file":"ReasonForVisit.js","sourceRoot":"","sources":["ReasonForVisit.tsx"],"names":[],"mappings":"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","sourcesContent":["import { otherColors } from '@ehrTheme/colors';\nimport { Box, Modal, Typography } from '@mui/material';\nimport { ReactElement, useEffect, useMemo, useRef, useState } from 'react';\nimport { FLAGGED_REASONS_FOR_VISIT, MOBILE_MODAL_STYLE } from '../constants';\nimport { ApptTab } from './AppointmentTabs';\nimport { GenericToolTip } from './GenericToolTip';\n\ninterface ReasonsForVisitProps {\n  reasonsForVisit: string;\n  tab: ApptTab;\n  formattedPriorityHighIcon: ReactElement;\n  lineMax: number;\n  isMobile?: boolean;\n}\n\nconst ReasonsForVisit = ({\n  reasonsForVisit,\n  tab,\n  formattedPriorityHighIcon,\n  lineMax,\n  isMobile = false,\n}: ReasonsForVisitProps): ReactElement => {\n  const [reasonIsOverflowing, setReasonIsOverflowing] = useState(false);\n  const reasonRef = useRef<HTMLDivElement | null>(null);\n  const [reason, reasonAdditional] = reasonsForVisit.split(' - ');\n  const [mobileModalOpen, setMobileModalOpen] = useState<boolean>(false);\n\n  const truncatedTextStyles = useMemo(() => {\n    return {\n      fontSize: '14px',\n      display: '-webkit-box',\n      WebkitLineClamp: lineMax,\n      WebkitBoxOrient: 'vertical',\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n    };\n  }, [lineMax]);\n\n  const flagReason = useMemo(\n    () => FLAGGED_REASONS_FOR_VISIT.includes(reason) && tab !== ApptTab.cancelled && tab !== ApptTab.completed,\n    [reason, tab]\n  );\n\n  useEffect(() => {\n    if (reasonRef.current) {\n      const isOverflowing = reasonRef.current.scrollHeight > reasonRef.current.clientHeight;\n      setReasonIsOverflowing(isOverflowing);\n    }\n  }, [reasonsForVisit]);\n\n  const toolTipTitle = useMemo(() => {\n    let title = flagReason ? 'Alert clinical team for immediate evaluation' : undefined;\n    if (reasonIsOverflowing) {\n      title = title ? `${title}\\n${reasonsForVisit}` : reasonsForVisit;\n    }\n    return title;\n  }, [flagReason, reasonIsOverflowing, reasonsForVisit]);\n\n  const reasonForVisitReactElement = useMemo(\n    () => (\n      <Typography\n        ref={reasonRef}\n        sx={truncatedTextStyles}\n        onClick={() => {\n          if (isMobile && toolTipTitle) {\n            setMobileModalOpen(true);\n          }\n        }}\n      >\n        {flagReason && formattedPriorityHighIcon}\n        <span style={{ color: flagReason ? otherColors.priorityHighText : undefined, display: 'inline' }}>\n          {reason}\n        </span>\n        {reasonAdditional && ` - ${reasonAdditional}`}\n      </Typography>\n    ),\n    [flagReason, formattedPriorityHighIcon, isMobile, reason, reasonAdditional, toolTipTitle, truncatedTextStyles]\n  );\n\n  return (\n    <>\n      {toolTipTitle && !isMobile ? (\n        <GenericToolTip title={toolTipTitle}>{reasonForVisitReactElement}</GenericToolTip>\n      ) : (\n        reasonForVisitReactElement\n      )}\n      {toolTipTitle && isMobile && (\n        <Modal open={mobileModalOpen} onClose={() => setMobileModalOpen(false)}>\n          <Box sx={MOBILE_MODAL_STYLE}>{toolTipTitle}</Box>\n        </Modal>\n      )}\n    </>\n  );\n};\n\nexport default ReasonsForVisit;\n"]}