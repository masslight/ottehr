{"version":3,"file":"useDeleteCommonLabOrderDialog.js","sourceRoot":"","sources":["useDeleteCommonLabOrderDialog.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  Box,\n  Button,\n  CircularProgress,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from '@mui/material';\nimport { ReactElement, useCallback, useState } from 'react';\n\ninterface UseDeleteCommonLabOrderDialogProps {\n  deleteOrder: ({\n    serviceRequestId,\n    testItemName,\n  }: {\n    serviceRequestId: string;\n    testItemName: string;\n  }) => Promise<boolean>;\n  locales?: typeof defaultLocalesConstants;\n}\n\nconst defaultLocalesConstants = {\n  noLabOrderSelectedForDeletion: 'No lab order selected for deletion',\n  failedToDeleteLabOrder: 'Failed to delete lab order',\n  errorOccurredDuringDeletion: 'An error occurred during deletion',\n  errorConfirmingDelete: 'Error confirming delete:',\n  deleteOrderDialogTitle: 'Delete Lab Order',\n  deleteOrderDialogContent: (testItemName: string) => (\n    <>\n      Are you sure you want to delete this order <strong>{testItemName}</strong>?\n      <br />\n      <br />\n      Deleting this order will also remove any additional associated diagnoses.\n    </>\n  ),\n  deleteOrderDialogKeepButton: 'Keep',\n  deleteOrderDialogDeleteButton: 'Delete Order',\n  deleteOrderDialogDeletingButton: 'Deleting Order...',\n};\n\ninterface UseDeleteCommonLabOrderDialogResult {\n  showDeleteLabOrderDialog: ({\n    serviceRequestId,\n    testItemName,\n  }: {\n    serviceRequestId: string;\n    testItemName: string;\n  }) => void;\n  DeleteOrderDialog: ReactElement | null;\n}\n\nexport const useDeleteCommonLabOrderDialog = ({\n  deleteOrder,\n  locales = defaultLocalesConstants,\n}: UseDeleteCommonLabOrderDialogProps): UseDeleteCommonLabOrderDialogResult => {\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [deleteError, setDeleteError] = useState<string | null>(null);\n  const [serviceRequestIdToDelete, setServiceRequestIdToDelete] = useState<string>('');\n  const [testItemNameToDelete, setTestItemNameToDelete] = useState<string>('');\n\n  const showDeleteLabOrderDialog = useCallback(\n    ({ serviceRequestId, testItemName }: { serviceRequestId: string; testItemName: string }): void => {\n      setServiceRequestIdToDelete(serviceRequestId);\n      setTestItemNameToDelete(testItemName);\n      setIsDeleteDialogOpen(true);\n      setDeleteError(null);\n    },\n    []\n  );\n\n  const closeDeleteDialog = useCallback((): void => {\n    setIsDeleteDialogOpen(false);\n    setDeleteError(null);\n  }, []);\n\n  const confirmDeleteOrder = useCallback(async (): Promise<void> => {\n    if (!serviceRequestIdToDelete) {\n      setDeleteError(locales.noLabOrderSelectedForDeletion);\n      return;\n    }\n\n    setIsDeleting(true);\n\n    try {\n      const success = await deleteOrder({\n        serviceRequestId: serviceRequestIdToDelete,\n        testItemName: testItemNameToDelete,\n      });\n\n      if (success) {\n        setIsDeleteDialogOpen(false);\n      } else {\n        setDeleteError(locales.failedToDeleteLabOrder);\n      }\n    } catch (err) {\n      console.error(locales.errorConfirmingDelete, err);\n      const errorMessage = err instanceof Error ? err.message : locales.errorOccurredDuringDeletion;\n      setDeleteError(errorMessage);\n    } finally {\n      setIsDeleting(false);\n    }\n  }, [serviceRequestIdToDelete, testItemNameToDelete, deleteOrder, locales]);\n\n  const DeleteOrderDialog = isDeleteDialogOpen ? (\n    <Dialog open={isDeleteDialogOpen} onClose={closeDeleteDialog} maxWidth=\"sm\" fullWidth>\n      <form\n        style={{ padding: '10px' }}\n        onSubmit={(e) => {\n          e.preventDefault();\n          void confirmDeleteOrder();\n        }}\n      >\n        <DialogTitle variant=\"h5\" color=\"primary.dark\">\n          {locales.deleteOrderDialogTitle}\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText>{locales.deleteOrderDialogContent(testItemNameToDelete)}</DialogContentText>\n          {deleteError && (\n            <Box sx={{ mt: 2, color: 'error.main' }}>\n              <DialogContentText color=\"error\">{deleteError}</DialogContentText>\n            </Box>\n          )}\n        </DialogContent>\n        <DialogActions sx={{ px: 3, pb: 2, width: '100%', display: 'flex', justifyContent: 'space-between' }}>\n          <Button\n            variant=\"outlined\"\n            onClick={closeDeleteDialog}\n            color=\"primary\"\n            disabled={isDeleting}\n            sx={{ borderRadius: '50px', textTransform: 'none' }}\n          >\n            {locales.deleteOrderDialogKeepButton}\n          </Button>\n          <Button\n            type=\"submit\"\n            variant=\"contained\"\n            color=\"error\"\n            disabled={isDeleting}\n            startIcon={isDeleting ? <CircularProgress size={16} color=\"inherit\" /> : null}\n            sx={{ borderRadius: '50px', textTransform: 'none' }}\n          >\n            {isDeleting ? locales.deleteOrderDialogDeletingButton : locales.deleteOrderDialogDeleteButton}\n          </Button>\n        </DialogActions>\n      </form>\n    </Dialog>\n  ) : null;\n\n  return {\n    showDeleteLabOrderDialog,\n    DeleteOrderDialog,\n  };\n};\n"]}