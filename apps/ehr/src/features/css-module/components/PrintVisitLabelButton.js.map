{"version":3,"file":"PrintVisitLabelButton.js","sourceRoot":"","sources":["PrintVisitLabelButton.tsx"],"names":[],"mappings":"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","sourcesContent":["import { ButtonBase, CircularProgress } from '@mui/material';\nimport { FC, useCallback, useState } from 'react';\nimport { getOrCreateVisitLabel } from 'src/api/api';\nimport { GenericToolTip } from 'src/components/GenericToolTip';\nimport { useApiClients } from 'src/hooks/useAppClients';\n\nconst PrintDisabledOutlined: FC = () => {\n  return (\n    <svg width=\"23\" height=\"24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        d=\"M1.41 1.6 0 3.01 5 8c-1.66 0-3 1.34-3 3v6h4v4h12l2.95 2.96 1.41-1.41zM6 15H4v-4c0-.55.45-1 1-1h2l3 3H6zm2 4v-4h4l4 4zM8 5h8v3h-5.34l2 2H19c.55 0 1 .45 1 1v4l-2 .01V13h-2.34l4 4H22v-6c0-1.66-1.34-3-3-3h-1V3H6v.36l2 2z\"\n        fill=\"currentColor\"\n      />\n      <circle cx=\"18\" cy=\"11.51\" r=\"1\" fill=\"currentColor\" />\n    </svg>\n  );\n};\n\nconst PrintOutlined: FC = () => {\n  return (\n    <svg width=\"22\" height=\"21\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        d=\"M19 8h-1V3H6v5H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3M8 5h8v3H8zm8 12v2H8v-4h8zm2-2v-2H6v2H4v-4c0-.55.45-1 1-1h14c.55 0 1 .45 1 1v4z\"\n        fill=\"currentColor\"\n      />\n      <circle cx=\"18\" cy=\"11.51\" r=\"1\" fill=\"currentColor\" />\n    </svg>\n  );\n};\n\ntype Props = {\n  encounterId?: string;\n};\n\nexport const PrintVisitLabelButton: FC<Props> = ({ encounterId }) => {\n  const { oystehrZambda } = useApiClients();\n\n  const [loading, setLoading] = useState(false);\n  const [isError, setIsError] = useState(false);\n\n  const handleClick = useCallback(async (): Promise<void> => {\n    if (!encounterId) {\n      console.warn('cannot print label because encounterId is undefined');\n      return;\n    }\n\n    setLoading(true);\n\n    if (oystehrZambda === undefined) {\n      console.error('oystehr client undefined. cannot fetch label');\n      setIsError(true);\n      return;\n    }\n\n    const labelPdfs = await getOrCreateVisitLabel(oystehrZambda, { encounterId });\n\n    if (labelPdfs.length !== 1) {\n      console.error('Expected 1 label pdf, received unexpected number', JSON.stringify(labelPdfs));\n      setIsError(true);\n    }\n\n    const labelPdf = labelPdfs[0];\n    window.open(labelPdf.presignedURL, '_blank');\n\n    setLoading(false);\n  }, [encounterId, oystehrZambda]);\n\n  const tooltipText = isError ? 'An error occurred' : 'Print label';\n  const icon = loading ? <CircularProgress size=\"15px\" /> : isError ? <PrintDisabledOutlined /> : <PrintOutlined />;\n\n  return (\n    <GenericToolTip\n      title={tooltipText}\n      customWidth=\"none\"\n      placement=\"top\"\n      leaveDelay={100}\n      slotProps={{\n        tooltip: {\n          sx: {\n            maxWidth: 150,\n            backgroundColor: '#F9FAFB',\n            color: '#000000',\n            border: '1px solid #dadde9',\n          },\n        },\n        popper: {\n          modifiers: [{ name: 'offset', options: { offset: [0, -14] } }],\n        },\n      }}\n    >\n      <ButtonBase\n        onClick={handleClick}\n        disabled={isError}\n        sx={{\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          color: '#0F347C',\n        }}\n      >\n        {icon}\n      </ButtonBase>\n    </GenericToolTip>\n  );\n};\n"]}