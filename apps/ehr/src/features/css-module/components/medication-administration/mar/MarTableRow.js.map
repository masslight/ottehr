{"version":3,"file":"MarTableRow.js","sourceRoot":"","sources":["MarTableRow.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Box, TableCell, TableRow } from '@mui/material';\nimport TouchRipple from '@mui/material/ButtonBase/TouchRipple';\nimport { alpha, styled, useTheme } from '@mui/material/styles';\nimport useTouchRipple from '@mui/material/useTouchRipple';\nimport { DateTime } from 'luxon';\nimport React, { useMemo } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { ExtendedMedicationDataForResponse, searchRouteByCode } from 'utils';\nimport { dataTestIds } from '../../../../../constants/data-test-ids';\nimport { getInHouseMedicationDetailsUrl } from '../../../routing/helpers';\nimport { MedicationStatusChip } from '../statuses/MedicationStatusChip';\nimport { MedicationActions } from './MedicationActions';\nimport { MedicationBarcodeScan } from './MedicationBarcodeScan';\nimport { MedicationInteractionsAlertButton } from './MedicationInteractionsAlertButton';\n\ninterface MarTableRowProps {\n  medication: ExtendedMedicationDataForResponse;\n  columnStyles: Record<string, React.CSSProperties>;\n}\n\nconst DATE_FORMAT = 'MM/dd/yyyy hh:mm a';\n\nconst StyledTouchRipple = styled(TouchRipple)(({ theme }) => ({\n  '& .MuiTouchRipple-child': {\n    backgroundColor: alpha(theme.palette.primary.main, 0.42),\n  },\n}));\n\nexport const MarTableRow: React.FC<MarTableRowProps> = ({ medication, columnStyles }) => {\n  const navigate = useNavigate();\n  const { id: appointmentId } = useParams();\n  const rippleRef = React.useRef(null);\n  const theme = useTheme();\n\n  const { getRippleHandlers } = useTouchRipple({\n    disabled: false,\n    focusVisible: false,\n    rippleRef,\n  });\n\n  const isPending = medication.status === 'pending';\n\n  const handleRowClick = (): void => {\n    if (!isPending) {\n      return;\n    }\n    requestAnimationFrame(() => {\n      navigate(`${getInHouseMedicationDetailsUrl(appointmentId!)}?scrollTo=${medication.id}`);\n    });\n  };\n\n  const formatOrderDateTime = useMemo(() => {\n    if (!medication.dateTimeCreated) return '-';\n\n    const dt = DateTime.fromISO(medication.dateTimeCreated);\n\n    if (!dt.isValid) return '-';\n\n    return dt.toFormat(DATE_FORMAT);\n  }, [medication.dateTimeCreated]);\n\n  const formatGivenDateTime = useMemo(() => {\n    // Try new format first: effectiveDateTime (ISO format)\n    if (medication.effectiveDateTime) {\n      const date = DateTime.fromISO(medication.effectiveDateTime);\n      if (date.isValid) return date.toFormat(DATE_FORMAT);\n    }\n\n    // Fallback to deprecated format: dateGiven + timeGiven for backward compatibility\n    if (medication.dateGiven && medication.timeGiven) {\n      const date = DateTime.fromFormat(`${medication.dateGiven} ${medication.timeGiven}`, 'yyyy-MM-dd HH:mm:ss');\n      if (date.isValid) return date.toFormat(DATE_FORMAT);\n    }\n\n    return '-';\n  }, [medication.effectiveDateTime, medication.dateGiven, medication.timeGiven]);\n\n  return (\n    <TableRow\n      data-testid={dataTestIds.inHouseMedicationsPage.marTableRow}\n      sx={{\n        cursor: 'pointer',\n        position: 'relative',\n        paddingLeft: '12px',\n        ...(isPending\n          ? {\n              '&:hover': {\n                backgroundColor: alpha(theme.palette.primary.main, 0.04),\n              },\n              willChange: 'background-color',\n            }\n          : { cursor: 'default' }),\n      }}\n      onClick={handleRowClick}\n      {...getRippleHandlers()}\n    >\n      <TableCell sx={columnStyles.interactionsAlert}>\n        <MedicationInteractionsAlertButton medication={medication} />\n      </TableCell>\n      <TableCell data-testid={dataTestIds.inHouseMedicationsPage.marTableMedicationCell} sx={columnStyles.medication}>\n        <MedicationBarcodeScan medication={medication} />\n      </TableCell>\n      <TableCell data-testid={dataTestIds.inHouseMedicationsPage.marTableDoseCell} sx={columnStyles.dose}>\n        {medication.dose} {medication.units}\n      </TableCell>\n      <TableCell data-testid={dataTestIds.inHouseMedicationsPage.marTableRouteCell} sx={columnStyles.route}>\n        {searchRouteByCode(medication.route)?.display || '-'}\n      </TableCell>\n      <TableCell sx={columnStyles.orderDateTime}>{formatOrderDateTime}</TableCell>\n      <TableCell sx={columnStyles.orderDateTime}>{medication.orderedByProvider}</TableCell>\n      {!isPending && (\n        <>\n          <TableCell sx={columnStyles.orderDateTime}>{formatGivenDateTime}</TableCell>\n          <TableCell sx={columnStyles.orderDateTime}>{medication.administeredProvider || ''}</TableCell>\n        </>\n      )}\n      <TableCell\n        data-testid={dataTestIds.inHouseMedicationsPage.marTableInstructionsCell}\n        sx={columnStyles.instructions}\n      >\n        {medication.instructions}\n      </TableCell>\n      <TableCell data-testid={dataTestIds.inHouseMedicationsPage.marTableStatusCell} sx={columnStyles.status}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n          <MedicationStatusChip medication={medication} />\n          <MedicationActions medication={medication} />\n        </Box>\n      </TableCell>\n      <StyledTouchRipple ref={rippleRef} center={false} />\n    </TableRow>\n  );\n};\n"]}