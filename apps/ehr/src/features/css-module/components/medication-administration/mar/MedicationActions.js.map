{"version":3,"file":"MedicationActions.js","sourceRoot":"","sources":["MedicationActions.tsx"],"names":[],"mappings":"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","sourcesContent":["import { DeleteOutlined as DeleteIcon, EditOutlined as EditIcon } from '@mui/icons-material';\nimport WarningIcon from '@mui/icons-material/Warning';\nimport { Box, IconButton, Typography, useTheme } from '@mui/material';\nimport { enqueueSnackbar } from 'notistack';\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { ExtendedMedicationDataForResponse } from 'utils';\nimport { CustomDialog } from '../../../../../components/dialogs/CustomDialog';\nimport { useMedicationManagement } from '../../../hooks/useMedicationManagement';\nimport { getEditOrderUrl } from '../../../routing/helpers';\n\ninterface MedicationActionsProps {\n  medication: ExtendedMedicationDataForResponse;\n}\n\nexport const MedicationActions: React.FC<MedicationActionsProps> = ({ medication }) => {\n  const theme = useTheme();\n  const { canEditMedication, deleteMedication } = useMedicationManagement();\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const navigate = useNavigate();\n  const { id: appointmentId } = useParams();\n\n  const [isDeleting, setIsDeleting] = useState(false);\n\n  useEffect(() => {\n    if (error) {\n      enqueueSnackbar(error, { variant: 'error' });\n    }\n  }, [error]);\n\n  const isEditable = canEditMedication(medication);\n\n  if (!isEditable) {\n    return null;\n  }\n\n  const handleDeleteClick = (): void => {\n    setIsDeleteDialogOpen(true);\n  };\n\n  const handleCloseDeleteDialog = (): void => {\n    setIsDeleteDialogOpen(false);\n    setError(null);\n  };\n\n  const handleConfirmDelete = async (): Promise<void> => {\n    setIsDeleting(true);\n    setError(null);\n    try {\n      await deleteMedication(medication.id);\n      setIsDeleteDialogOpen(false);\n    } catch (error) {\n      console.error('Error deleting medication:', error);\n      setError('An error occurred while deleting the medication. Please try again.');\n    }\n    setIsDeleting(false);\n  };\n\n  const dialogTitle = (\n    <Box display=\"flex\" alignItems=\"center\" color=\"error.main\">\n      <WarningIcon sx={{ mr: 1 }} />\n      <Typography variant=\"h4\">Delete Medication</Typography>\n    </Box>\n  );\n\n  const navigateToEditOrder = (): void => {\n    if (!appointmentId) {\n      enqueueSnackbar('navigation error', { variant: 'error' });\n      return;\n    }\n    navigate(getEditOrderUrl(appointmentId, medication.id));\n  };\n\n  return (\n    <Box onClick={(e) => e.stopPropagation()}>\n      <IconButton size=\"small\" aria-label=\"edit\" onClick={navigateToEditOrder}>\n        <EditIcon sx={{ color: theme.palette.primary.dark }} />\n      </IconButton>\n      <IconButton size=\"small\" aria-label=\"delete\" onClick={handleDeleteClick}>\n        <DeleteIcon sx={{ color: theme.palette.warning.dark }} />\n      </IconButton>\n      <CustomDialog\n        open={isDeleteDialogOpen}\n        handleClose={handleCloseDeleteDialog}\n        title={dialogTitle}\n        description={`Are you sure you want to delete the medication \"${medication.medicationName}\"?`}\n        closeButtonText=\"Cancel\"\n        closeButton={false}\n        handleConfirm={handleConfirmDelete}\n        confirmText={isDeleting ? 'Deleting...' : 'Delete'}\n        confirmLoading={isDeleting}\n      />\n    </Box>\n  );\n};\n"]}