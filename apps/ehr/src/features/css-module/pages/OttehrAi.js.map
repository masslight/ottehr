{"version":3,"file":"OttehrAi.js","sourceRoot":"","sources":["OttehrAi.tsx"],"names":[],"mappings":"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","sourcesContent":["import { ottehrAiIcon } from '@ehrTheme/icons';\nimport { Box, Stack, Typography } from '@mui/material';\nimport React from 'react';\nimport { useParams } from 'react-router-dom';\nimport { AiObservationField, ObservationTextFieldDTO } from 'utils';\nimport { AiChatHistory } from '../../../components/AiChatHistory';\nimport AiSuggestion from '../../../components/AiSuggestion';\nimport { getSelectors } from '../../../shared/store/getSelectors';\nimport { AccordionCard, useAppointmentStore } from '../../../telemed';\nimport { CSSLoader } from '../components/CSSLoader';\nimport { useAppointment } from '../hooks/useAppointment';\n\nconst AI_OBSERVATION_FIELDS = [\n  [AiObservationField.HistoryOfPresentIllness, 'History of Present Illness (HPI)'],\n  [AiObservationField.PastMedicalHistory, 'Past Medical History (PMH)'],\n  [AiObservationField.PastSurgicalHistory, 'Past Surgical History (PSH)'],\n  [AiObservationField.MedicationsHistory, 'Medications'],\n  [AiObservationField.Allergies, 'Allergies'],\n  [AiObservationField.SocialHistory, 'Social history'],\n  [AiObservationField.FamilyHistory, 'Family history'],\n  [AiObservationField.HospitalizationsHistory, 'Hospitalization'],\n];\n\ninterface OttehrAiProps {\n  appointmentId?: string;\n}\n\nexport const OttehrAi: React.FC<OttehrAiProps> = () => {\n  const { id: appointmentId } = useParams();\n  const {\n    resources: { appointment },\n    isLoading,\n    error,\n  } = useAppointment(appointmentId);\n\n  const { chartData, isChartDataLoading } = getSelectors(useAppointmentStore, ['chartData', 'isChartDataLoading']);\n\n  if (isLoading || isChartDataLoading) return <CSSLoader />;\n  if (error) return <Typography>Error: {error.message}</Typography>;\n  if (!appointment) return <Typography>No data available</Typography>;\n\n  const aiPotentialDiagnoses = chartData?.aiPotentialDiagnosis ?? [];\n\n  return (\n    <Stack spacing={1}>\n      <AccordionCard>\n        <Box style={{ padding: '16px', height: '350px', overflowY: 'auto' }}>\n          <Box\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              paddingBottom: '8px',\n            }}\n          >\n            <img src={ottehrAiIcon} style={{ width: '30px', marginRight: '8px' }} />\n            <Typography variant=\"subtitle2\" style={{ fontWeight: 700, fontSize: '14px' }}>\n              CHAT WITH OYSTEHR AI\n            </Typography>\n          </Box>\n          <AiChatHistory questionnaireResponse={chartData?.aiChat} />\n        </Box>\n      </AccordionCard>\n      <AccordionCard>\n        <Stack style={{ padding: '16px' }} spacing={1}>\n          <Box\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n            }}\n          >\n            <img src={ottehrAiIcon} style={{ width: '30px', marginRight: '8px' }} />\n            <Typography variant=\"subtitle2\" style={{ fontWeight: 700, fontSize: '14px' }}>\n              OYSTEHR AI SUGGESTIONS\n            </Typography>\n          </Box>\n          {AI_OBSERVATION_FIELDS.map(([filed, title]) => {\n            const dto = chartData?.observations?.find(\n              (observation) => observation.field === filed\n            ) as ObservationTextFieldDTO;\n            if (dto == null) {\n              return undefined;\n            }\n            return <AiSuggestion key={filed} title={title} content={dto.value} hideHeader={true} />;\n          })}\n          {aiPotentialDiagnoses.length > 0 ? (\n            <Box\n              style={{\n                background: '#FFF9EF',\n                borderRadius: '8px',\n                padding: '8px',\n              }}\n            >\n              <Typography variant=\"body1\" style={{ fontWeight: 700, marginBottom: '8px' }}>\n                Potential Diagnoses with ICD-10 Codes\n              </Typography>\n              <ul>\n                {aiPotentialDiagnoses.map((diagnosis) => {\n                  return (\n                    <li key={diagnosis.code}>\n                      <Typography variant=\"body1\">{diagnosis.code + ': ' + diagnosis.display}</Typography>\n                    </li>\n                  );\n                })}\n              </ul>\n            </Box>\n          ) : undefined}\n        </Stack>\n      </AccordionCard>\n    </Stack>\n  );\n};\n"]}