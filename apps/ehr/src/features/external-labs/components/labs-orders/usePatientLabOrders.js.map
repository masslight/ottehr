{"version":3,"file":"usePatientLabOrders.js","sourceRoot":"","sources":["usePatientLabOrders.ts"],"names":[],"mappings":"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","sourcesContent":["import { DateTime } from 'luxon';\nimport { ReactElement, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { getExternalLabOrdersUrl } from 'src/features/css-module/routing/helpers';\nimport {\n  DEFAULT_LABS_ITEMS_PER_PAGE,\n  DeleteLabOrderZambdaInput,\n  EMPTY_PAGINATION,\n  GetLabOrdersParameters,\n  LabOrderDTO,\n  LabOrdersSearchBy,\n  PaginatedResponse,\n  PatientLabItem,\n  SpecimenDateChangedParameters,\n  TaskReviewedParameters,\n  tryFormatDateToISO,\n} from 'utils';\nimport { deleteLabOrder, getExternalLabOrders, updateLabOrderResources } from '../../../../api/api';\nimport { useApiClients } from '../../../../hooks/useAppClients';\nimport { useDeleteCommonLabOrderDialog } from '../../../common/useDeleteCommonLabOrderDialog';\n\ninterface UsePatientLabOrdersResult<SearchBy extends LabOrdersSearchBy> {\n  labOrders: LabOrderDTO<SearchBy>[];\n  loading: boolean;\n  error: Error | null;\n  totalPages: number;\n  page: number;\n  setSearchParams: (searchParams: {\n    pageNumber?: number;\n    testTypeFilter?: string;\n    visitDateFilter?: DateTime | null;\n  }) => void;\n  orderableItemCodeFilter: string;\n  visitDateFilter: DateTime | null;\n  fetchLabOrders: (params: GetLabOrdersParameters) => Promise<void>;\n  showPagination: boolean;\n  deleteLabOrder: (params: DeleteLabOrderZambdaInput) => Promise<boolean>;\n  showDeleteLabOrderDialog: ({\n    serviceRequestId,\n    testItemName,\n  }: {\n    serviceRequestId: string;\n    testItemName: string;\n  }) => void;\n  DeleteOrderDialog: ReactElement | null;\n  markTaskAsReviewed: (parameters: TaskReviewedParameters & { appointmentId: string }) => Promise<void>;\n  saveSpecimenDate: (parameters: SpecimenDateChangedParameters) => Promise<void>;\n  patientLabItems: PatientLabItem[];\n}\n\nexport const usePatientLabOrders = <SearchBy extends LabOrdersSearchBy>(\n  _searchBy: SearchBy\n): UsePatientLabOrdersResult<SearchBy> => {\n  const { oystehrZambda } = useApiClients();\n  const navigate = useNavigate();\n  const [labOrders, setLabOrders] = useState<LabOrderDTO<SearchBy>[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n  const [totalPages, setTotalPages] = useState(1);\n  const [patientLabItems, setPatientLabItems] = useState<PatientLabItem[]>([]);\n\n  /**\n   * Search state management strategy:\n   *\n   * Page: object in useState to force useEffect re-runs even with same value\n   * Filters: refs to avoid re-renders when setting multiple filters and to get updated values synchronously\n   *\n   * Benefits:\n   * - Single useEffect handles all search logic (page + searchBy dependencies)\n   * - Filters can be set independently without triggering fetches\n   * - Page changes are the only fetch trigger (predictable data flow)\n   * - Simplified API: one setSearchParams method for everything\n   */\n  const [page, setPage] = useState({ pageNumber: 1 });\n  const testTypeFilterRef = useRef('');\n  const visitDateFilterRef = useRef<DateTime | null>(null);\n\n  const [showPagination, setShowPagination] = useState(false);\n\n  // calling without arguments will refetch the data with the current search params\n  const setSearchParams = useCallback(\n    (searchParams: { pageNumber?: number; testTypeFilter?: string; visitDateFilter?: DateTime | null }) => {\n      if (searchParams.testTypeFilter !== undefined) {\n        testTypeFilterRef.current = searchParams.testTypeFilter;\n      }\n      if (searchParams.visitDateFilter !== undefined) {\n        visitDateFilterRef.current = searchParams.visitDateFilter;\n      }\n      setPage((page) => ({ pageNumber: searchParams.pageNumber || page.pageNumber }));\n    },\n    []\n  );\n\n  // Memoize searchBy to prevent unnecessary re-renders\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const memoizedSearchBy = useMemo(() => _searchBy, [JSON.stringify(_searchBy)]);\n\n  const fetchLabOrders = useCallback(\n    async (searchParams: GetLabOrdersParameters): Promise<void> => {\n      if (!oystehrZambda) {\n        console.error('oystehrZambda is not defined');\n        return;\n      }\n\n      if (\n        !searchParams.searchBy.value ||\n        (Array.isArray(searchParams.searchBy.value) && searchParams.searchBy.value.length === 0)\n      ) {\n        // search params are not ready yet, that's ok probably\n        return;\n      }\n\n      setLoading(true);\n      setError(null);\n\n      try {\n        let response: PaginatedResponse<SearchBy>;\n        try {\n          response = await getExternalLabOrders(oystehrZambda, searchParams);\n        } catch (err) {\n          response = {\n            data: [],\n            pagination: EMPTY_PAGINATION,\n            patientLabItems: [],\n          };\n          console.error('Error fetching external lab orders:', err);\n          setError(err instanceof Error ? err : new Error('Unknown error occurred'));\n        }\n\n        if (response?.data) {\n          setLabOrders(response.data as LabOrderDTO<SearchBy>[]);\n          setPatientLabItems(response.patientLabItems || []);\n\n          if (response.pagination) {\n            setTotalPages(response.pagination.totalPages || 1);\n            setShowPagination(response.pagination.totalPages > 1);\n          } else {\n            setTotalPages(1);\n            setShowPagination(false);\n          }\n        } else {\n          setLabOrders([]);\n          setPatientLabItems([]);\n          setTotalPages(1);\n          setShowPagination(false);\n        }\n      } catch (error) {\n        console.error('error with setting external lab orders:', error);\n        setError(error instanceof Error ? error : new Error('Unknown error occurred'));\n        setLabOrders([]);\n        setPatientLabItems([]);\n        setTotalPages(1);\n        setShowPagination(false);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [oystehrZambda]\n  );\n\n  useEffect(() => {\n    if (page.pageNumber < 1) {\n      throw Error('Page number must be greater than 0');\n    }\n\n    const params: GetLabOrdersParameters = {\n      itemsPerPage: DEFAULT_LABS_ITEMS_PER_PAGE,\n      ...memoizedSearchBy,\n      ...(testTypeFilterRef.current && { orderableItemCode: testTypeFilterRef.current }),\n      ...(visitDateFilterRef.current &&\n        visitDateFilterRef.current.isValid && { visitDate: tryFormatDateToISO(visitDateFilterRef.current) }),\n    };\n\n    const searchParams = { ...params, pageIndex: page.pageNumber - 1 };\n\n    if (searchParams.searchBy.field && searchParams.searchBy.value) {\n      void fetchLabOrders(searchParams);\n    } else {\n      console.error('searchParams are not valid', searchParams);\n    }\n  }, [fetchLabOrders, page, memoizedSearchBy]);\n\n  const handleDeleteLabOrder = useCallback(\n    async ({ serviceRequestId }: DeleteLabOrderZambdaInput): Promise<boolean> => {\n      if (!serviceRequestId) {\n        console.error('Cannot delete lab order: Missing service request ID');\n        setError(new Error('Missing service request ID'));\n        return false;\n      }\n\n      if (!oystehrZambda) {\n        console.error('Cannot delete lab order: API client is not available');\n        setError(new Error('API client is not available'));\n        return false;\n      }\n\n      setLoading(true);\n      setError(null);\n\n      try {\n        const deleteParams: DeleteLabOrderZambdaInput = {\n          serviceRequestId,\n        };\n\n        await deleteLabOrder(oystehrZambda, deleteParams);\n\n        setSearchParams({ pageNumber: 1 });\n\n        return true;\n      } catch (err) {\n        console.error('Error deleting external lab order:', err);\n\n        const errorObj =\n          err instanceof Error ? err : new Error(typeof err === 'string' ? err : 'Failed to delete lab order');\n\n        setError(errorObj);\n\n        return false;\n      } finally {\n        setLoading(false);\n      }\n    },\n    [oystehrZambda, setSearchParams]\n  );\n\n  // handle delete dialog\n  const { showDeleteLabOrderDialog, DeleteOrderDialog } = useDeleteCommonLabOrderDialog({\n    deleteOrder: handleDeleteLabOrder,\n  });\n\n  const markTaskAsReviewed = useCallback(\n    async ({\n      taskId,\n      serviceRequestId,\n      diagnosticReportId,\n      appointmentId,\n    }: TaskReviewedParameters & { appointmentId: string }): Promise<void> => {\n      if (!oystehrZambda) {\n        console.error('oystehrZambda is not defined');\n        return;\n      }\n\n      setLoading(true);\n\n      await updateLabOrderResources(oystehrZambda, { taskId, serviceRequestId, diagnosticReportId, event: 'reviewed' });\n      setSearchParams({ pageNumber: 1 });\n      navigate(getExternalLabOrdersUrl(appointmentId));\n    },\n    [oystehrZambda, setSearchParams, navigate]\n  );\n\n  const saveSpecimenDate = useCallback(\n    async ({\n      specimenId,\n      date,\n      serviceRequestId,\n    }: {\n      specimenId: string;\n      date: string;\n      serviceRequestId: string;\n    }): Promise<void> => {\n      if (!oystehrZambda) {\n        console.error('oystehrZambda is not defined');\n        return;\n      }\n\n      await updateLabOrderResources(oystehrZambda, {\n        specimenId,\n        date,\n        event: 'specimenDateChanged',\n        serviceRequestId,\n      });\n    },\n    [oystehrZambda]\n  );\n\n  return {\n    labOrders,\n    loading,\n    error,\n    totalPages,\n    page: page.pageNumber,\n    setSearchParams,\n    orderableItemCodeFilter: testTypeFilterRef.current,\n    visitDateFilter: visitDateFilterRef.current,\n    fetchLabOrders,\n    showPagination,\n    deleteLabOrder: handleDeleteLabOrder,\n    showDeleteLabOrderDialog,\n    DeleteOrderDialog,\n    markTaskAsReviewed,\n    saveSpecimenDate,\n    patientLabItems,\n  };\n};\n"]}