{"version":3,"file":"ResultEntrySelect.js","sourceRoot":"","sources":["ResultEntrySelect.tsx"],"names":[],"mappings":"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","sourcesContent":["import { FormControl, MenuItem, Select, useTheme } from '@mui/material';\nimport { Controller, useFormContext } from 'react-hook-form';\nimport { LabComponentValueSetConfig, TestItemComponent } from 'utils';\n\ninterface ResultEntrySelectProps {\n  testItemComponent: TestItemComponent;\n  isAbnormal: boolean;\n  setIsAbnormal: (bool: boolean) => void;\n  disabled?: boolean; // equates to the final view\n}\n\nexport const ResultEntrySelect: React.FC<ResultEntrySelectProps> = ({\n  testItemComponent,\n  isAbnormal,\n  setIsAbnormal,\n  disabled,\n}) => {\n  const { control } = useFormContext();\n  const theme = useTheme();\n\n  const assessAbnormality = (entry: string): void => {\n    if (testItemComponent.dataType === 'CodeableConcept' && testItemComponent.abnormalValues) {\n      console.log('entry', entry);\n      if (testItemComponent.abnormalValues.map((val) => val.code).includes(entry)) {\n        setIsAbnormal(true);\n      } else {\n        setIsAbnormal(false);\n      }\n    }\n  };\n\n  let values: LabComponentValueSetConfig[] = [];\n  if (testItemComponent.dataType === 'CodeableConcept') {\n    values = testItemComponent.valueSet;\n  }\n\n  return (\n    <FormControl\n      sx={{\n        width: '80%',\n        '& .MuiOutlinedInput-root': {\n          color: isAbnormal ? 'error.main' : '',\n          '& fieldset': {\n            borderColor: isAbnormal ? 'error.main' : '',\n          },\n          '&:hover fieldset': {\n            borderColor: isAbnormal ? 'error.dark' : '',\n          },\n          '&.Mui-focused fieldset': {\n            borderColor: isAbnormal ? 'error.dark' : '',\n          },\n          '&.Mui-disabled': {\n            '& fieldset': {\n              borderColor: isAbnormal ? 'error.dark' : '',\n            },\n          },\n        },\n\n        '& .MuiSelect-select.Mui-disabled': {\n          color: isAbnormal ? 'error.dark' : 'text.primary',\n          WebkitTextFillColor: isAbnormal ? theme.palette.error.dark : theme.palette.text.primary,\n        },\n      }}\n      size=\"small\"\n    >\n      <Controller\n        name={testItemComponent.observationDefinitionId}\n        control={control}\n        rules={{ required: 'Please select a value' }}\n        defaultValue=\"\"\n        render={({ field }) => (\n          <Select\n            disabled={!!disabled}\n            fullWidth\n            id=\"result-entry-select\"\n            {...field}\n            onChange={(e) => {\n              field.onChange(e);\n              assessAbnormality(e.target.value);\n            }}\n          >\n            {values?.map((val, idx) => (\n              <MenuItem id={`${val}-${idx}-id`} key={`${val}-${idx}-key`} value={val.code}>\n                {val.display}\n              </MenuItem>\n            ))}\n          </Select>\n        )}\n      />\n    </FormControl>\n  );\n};\n"]}