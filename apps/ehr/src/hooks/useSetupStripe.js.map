{"version":3,"file":"useSetupStripe.js","sourceRoot":"","sources":["useSetupStripe.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,2CAAuD;AAGvD,iDAAgD;AAEzC,IAAM,cAAc,GAAG,UAC5B,oBAAwC,EACxC,SAAiG;IAEzF,IAAA,aAAa,GAAK,IAAA,6BAAa,GAAE,cAApB,CAAqB;IAC1C,OAAO,IAAA,sBAAQ,EACb,CAAC,+BAAwB,oBAAoB,CAAE,EAAE,oBAAoB,CAAC,EACtE;;;;;yBACM,CAAA,aAAa,IAAI,oBAAoB,CAAA,EAArC,wBAAqC;oBAC1B,qBAAM,aAAa,CAAC,MAAM,CAAC,OAAO,CAAC;4BAC9C,EAAE,EAAE,uBAAuB;4BAC3B,oBAAoB,sBAAA;yBACrB,CAAC,EAAA;;oBAHI,IAAI,GAAG,SAGX;oBACF,IAAI,SAAS,EAAE,CAAC;wBACd,SAAS,CAAC,IAAI,CAAC,MAAgB,CAAC,CAAC;oBACnC,CAAC;oBACD,sBAAO,IAAI,CAAC,MAAgB,EAAC;wBAG/B,MAAM,IAAI,KAAK,CAAC,sDAAsD,CAAC,CAAC;;;SACzE,EACD;QACE,OAAO,EAAE,OAAO,CAAC,aAAa,IAAI,oBAAoB,CAAC;QACvD,SAAS,WAAA;QACT,OAAO,EAAE,UAAC,GAAG;YACX,OAAO,CAAC,KAAK,CAAC,8CAA8C,EAAE,GAAG,CAAC,CAAC;QACrE,CAAC;KACF,CACF,CAAC;AACJ,CAAC,CAAC;AA7BW,QAAA,cAAc,kBA6BzB","sourcesContent":["import { useQuery, UseQueryResult } from 'react-query';\nimport { OystehrAPIClient } from 'ui-components';\nimport { PromiseReturnType } from 'utils';\nimport { useApiClients } from './useAppClients';\n\nexport const useSetupStripe = (\n  beneficiaryPatientId: string | undefined,\n  onSuccess?: (data: PromiseReturnType<ReturnType<OystehrAPIClient['setupPaymentMethod']>>) => void\n): UseQueryResult<string | undefined, Error> => {\n  const { oystehrZambda } = useApiClients();\n  return useQuery(\n    [`setup-payment-method/${beneficiaryPatientId}`, beneficiaryPatientId],\n    async () => {\n      if (oystehrZambda && beneficiaryPatientId) {\n        const data = await oystehrZambda.zambda.execute({\n          id: 'payment-methods-setup',\n          beneficiaryPatientId,\n        });\n        if (onSuccess) {\n          onSuccess(data.output as string);\n        }\n        return data.output as string;\n      }\n\n      throw new Error('api client not defined or patient id is not provided');\n    },\n    {\n      enabled: Boolean(oystehrZambda && beneficiaryPatientId),\n      onSuccess,\n      onError: (err) => {\n        console.error('Error during fetching setup payment method: ', err);\n      },\n    }\n  );\n};\n"]}