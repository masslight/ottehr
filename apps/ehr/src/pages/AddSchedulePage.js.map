{"version":3,"file":"AddSchedulePage.js","sourceRoot":"","sources":["AddSchedulePage.tsx"],"names":[],"mappings":"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","sourcesContent":["import { LoadingButton } from '@mui/lab';\nimport { Box, Paper, TextField, Typography } from '@mui/material';\nimport { HealthcareService, Location, Practitioner } from 'fhir/r4b';\nimport { ReactElement, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { ScheduleStrategyCoding } from 'utils';\nimport CustomBreadcrumbs from '../components/CustomBreadcrumbs';\nimport { useApiClients } from '../hooks/useAppClients';\nimport PageContainer from '../layout/PageContainer';\nimport { getResource } from './SchedulePage';\n\nexport default function AddSchedulePage(): ReactElement {\n  // Define variables to interact w database and navigate to other pages\n  const { oystehr } = useApiClients();\n  const navigate = useNavigate();\n  const scheduleType = useParams()['schedule-type'] as 'location' | 'provider' | 'group';\n\n  if (!scheduleType) {\n    throw new Error('scheduleType is not defined');\n  }\n\n  // state variables\n  const [name, setName] = useState<string | undefined>(undefined);\n  const [firstName, setFirstName] = useState<string | undefined>(undefined);\n  const [lastName, setLastName] = useState<string | undefined>(undefined);\n  const [loading, setLoading] = useState<boolean>(false);\n\n  async function createSchedule(event: any): Promise<void> {\n    event.preventDefault();\n    if (!oystehr) {\n      return;\n    }\n    setLoading(true);\n    const resourceData: Location | Practitioner | HealthcareService = {\n      resourceType: getResource(scheduleType),\n      name: (getResource(scheduleType) === 'Practitioner' ? [{ given: [firstName], family: lastName }] : name) as any,\n    };\n    if (scheduleType === 'group') {\n      (resourceData as HealthcareService).characteristic = [\n        {\n          coding: [\n            {\n              system: 'http://hl7.org/fhir/service-mode',\n              code: 'in-person',\n              display: 'In Person',\n            },\n          ],\n        },\n        {\n          coding: [\n            {\n              code: ScheduleStrategyCoding.poolsAll.code,\n              display: ScheduleStrategyCoding.poolsAll.display,\n              system: ScheduleStrategyCoding.poolsAll.system,\n            },\n          ],\n        },\n      ];\n    }\n    const resource = await oystehr.fhir.create<Location | Practitioner | HealthcareService>(resourceData);\n    setLoading(false);\n    if (scheduleType === 'group') {\n      navigate(`/group/id/${resource.id}`);\n    } else {\n      navigate(`/schedule/new/${scheduleType}/${resource.id}`);\n    }\n  }\n\n  return (\n    <PageContainer>\n      <>\n        <Box marginX={12}>\n          {/* Breadcrumbs */}\n          <CustomBreadcrumbs\n            chain={[\n              { link: '/schedules', children: 'Schedules' },\n              { link: '#', children: `Add ${scheduleType}` },\n            ]}\n          />\n          <Paper sx={{ padding: 2 }}>\n            {/* Page title */}\n            <Typography variant=\"h3\" color=\"primary.dark\" marginBottom={1}>\n              Add {scheduleType}\n            </Typography>\n            <form onSubmit={createSchedule}>\n              {scheduleType === 'provider' ? (\n                <>\n                  <TextField\n                    label=\"First name\"\n                    required\n                    value={firstName}\n                    onChange={(event) => setFirstName(event.target.value)}\n                  />\n                  <TextField\n                    label=\"Last name\"\n                    required\n                    value={lastName}\n                    onChange={(event) => setLastName(event.target.value)}\n                  />\n                </>\n              ) : (\n                <TextField label=\"Name\" required value={name} onChange={(event) => setName(event.target.value)} />\n              )}\n              <br />\n              <LoadingButton type=\"submit\" loading={loading} variant=\"contained\" sx={{ marginTop: 2 }}>\n                Save\n              </LoadingButton>\n            </form>\n          </Paper>\n        </Box>\n      </>\n    </PageContainer>\n  );\n}\n"]}