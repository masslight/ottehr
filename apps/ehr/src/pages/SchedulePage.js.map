{"version":3,"file":"SchedulePage.js","sourceRoot":"","sources":["SchedulePage.tsx"],"names":[],"mappings":"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","sourcesContent":["import { otherColors } from '@ehrTheme/colors';\nimport ContentCopyRoundedIcon from '@mui/icons-material/ContentCopyRounded';\nimport { LoadingButton, TabContext, TabList, TabPanel } from '@mui/lab';\nimport {\n  Autocomplete,\n  Box,\n  Button,\n  CircularProgress,\n  Grid,\n  Paper,\n  Skeleton,\n  Switch,\n  Tab,\n  TextField,\n  Tooltip,\n  Typography,\n} from '@mui/material';\nimport { Location, Practitioner, Schedule } from 'fhir/r4b';\nimport { enqueueSnackbar } from 'notistack';\nimport { ReactElement, useEffect, useState } from 'react';\nimport { useMutation, useQuery, useQueryClient } from 'react-query';\nimport { Link, useNavigate, useParams } from 'react-router-dom';\nimport {\n  APIError,\n  CreateScheduleParams,\n  isApiError,\n  isValidUUID,\n  ScheduleDTO,\n  scheduleTypeFromFHIRType,\n  TIMEZONES,\n  UpdateScheduleParams,\n} from 'utils';\nimport { createSchedule, getSchedule, updateSchedule } from '../api/api';\nimport CustomBreadcrumbs from '../components/CustomBreadcrumbs';\nimport Loading from '../components/Loading';\nimport ScheduleComponent from '../components/schedule/ScheduleComponent';\nimport { useApiClients } from '../hooks/useAppClients';\nimport PageContainer from '../layout/PageContainer';\n\nconst INTAKE_URL = import.meta.env.VITE_APP_INTAKE_URL;\n\nexport function getResource(\n  scheduleType: 'location' | 'provider' | 'group'\n): 'Location' | 'Practitioner' | 'HealthcareService' {\n  if (scheduleType === 'location') {\n    return 'Location';\n  } else if (scheduleType === 'provider') {\n    return 'Practitioner';\n  } else if (scheduleType === 'group') {\n    return 'HealthcareService';\n  }\n\n  console.log(`scheduleType unknown ${scheduleType}`);\n  throw new Error('scheduleType unknown');\n}\n\nexport default function SchedulePage(): ReactElement {\n  // Define variables to interact w database and navigate to other pages\n  const { oystehr } = useApiClients();\n  const scheduleType = useParams()['schedule-type'] as 'location' | 'provider' | undefined;\n  const ownerId = useParams()['owner-id'] as string | undefined;\n  const scheduleId = useParams()['schedule-id'] as string;\n  const createMode = scheduleType !== undefined && ownerId !== undefined;\n  const navigate = useNavigate();\n  const queryClient = useQueryClient();\n\n  // state variables\n  const [tabName, setTabName] = useState('schedule');\n  const [item, setItem] = useState<ScheduleDTO | undefined>(undefined);\n\n  const [statusPatchLoading, setStatusPatchLoading] = useState(false);\n  const [isCopied, setIsCopied] = useState<boolean>(false);\n\n  // todo: currently these things are props of the schedule owner and get rendered as the content of the \"general\" tab\n  // would like to refactor that tab to be its own Page responsible for displaying the configuration of\n  // the underlying fhir resource representing the schedule owner\n  const [slug, setSlug] = useState<string | undefined>(undefined);\n  const [timezone, setTimezone] = useState<string>(TIMEZONES[0]);\n  const defaultIntakeUrl = (() => {\n    const fhirType = item?.owner.type;\n    const locationType = item?.owner.isVirtual ? 'virtual' : 'in-person';\n    if (slug && fhirType) {\n      return `${INTAKE_URL}/prebook/${locationType}?bookingOn=${slug}&scheduleType=${scheduleTypeFromFHIRType(\n        fhirType\n      )}`;\n    }\n    return '';\n  })();\n\n  useEffect(() => {\n    if (item) {\n      setTimezone(item?.owner.timezone ?? TIMEZONES[0]);\n      setSlug(item?.owner.slug);\n    }\n  }, [item]);\n\n  const { oystehrZambda } = useApiClients();\n  const queryEnabled = (() => {\n    if (!oystehrZambda) {\n      return false;\n    }\n    if (createMode) {\n      return true;\n    }\n    if (!createMode && isValidUUID(scheduleId)) {\n      return true;\n    }\n    return false;\n  })();\n\n  const { isLoading, isFetching, isRefetching } = useQuery(\n    ['ehr-get-schedule', { zambdaClient: oystehrZambda, scheduleId, ownerId, scheduleType }],\n    () =>\n      oystehrZambda\n        ? getSchedule(\n            { scheduleId, ownerId, ownerType: scheduleType ? getResource(scheduleType) : undefined },\n            oystehrZambda\n          )\n        : null,\n    {\n      onSuccess: (response) => {\n        if (response !== null) {\n          console.log('schedule response', response);\n          setItem(response);\n        }\n      },\n      enabled: queryEnabled,\n    }\n  );\n\n  const saveScheduleChanges = useMutation({\n    mutationFn: async (params: UpdateScheduleParams) => {\n      if (oystehrZambda) {\n        const response = await updateSchedule(params, oystehrZambda);\n        return response;\n      }\n      throw new Error('fhir client not defined or patient id not provided');\n    },\n    onError: (error: any) => {\n      if (isApiError(error)) {\n        const message = (error as APIError).message;\n        enqueueSnackbar(message, { variant: 'error' });\n      } else {\n        enqueueSnackbar('Something went wrong! Schedule changes could not be saved.', { variant: 'error' });\n      }\n    },\n    onSuccess: async () => {\n      await queryClient.invalidateQueries(['ehr-get-schedule']);\n      enqueueSnackbar('Schedule changes saved successfully!', { variant: 'success' });\n    },\n  });\n\n  const createNewSchedule = useMutation({\n    mutationFn: async (params: CreateScheduleParams) => {\n      if (oystehrZambda) {\n        const response = await createSchedule(params, oystehrZambda);\n        return response;\n      }\n      throw new Error('fhir client not defined or patient id not provided');\n    },\n    onError: (error: any) => {\n      if (isApiError(error)) {\n        const message = (error as APIError).message;\n        enqueueSnackbar(message, { variant: 'error' });\n      } else {\n        enqueueSnackbar('Something went wrong! Schedule could not be created.', { variant: 'error' });\n      }\n    },\n    onSuccess: async (newSchedule: Schedule) => {\n      navigate(`/schedule/id/${newSchedule.id}`);\n      enqueueSnackbar('Schedule added successfully!', { variant: 'success' });\n    },\n  });\n\n  const somethingIsLoadingInSomeWay = isLoading || isFetching || isRefetching || saveScheduleChanges.isLoading;\n\n  // console.log('scheduleFetchState (loading/fetching/error/success): ', isLoading, isFetching, isError, isSuccess);\n\n  // handle functions\n  const handleTabChange = (event: React.SyntheticEvent, newTabName: string): void => {\n    setTabName(newTabName);\n  };\n\n  async function onSaveSchedule(params: UpdateScheduleParams): Promise<void> {\n    if (!oystehrZambda) {\n      console.log('oystehr client is not defined');\n      return;\n    }\n    if (createMode && scheduleType) {\n      const ownerResourceType = getResource(scheduleType);\n      if (!ownerId || !ownerResourceType || !params.schedule) {\n        enqueueSnackbar('Schedule could not be created. Please reload the page and try again.', { variant: 'error' });\n        return;\n      }\n      console.log('ownerId', ownerId, ownerResourceType);\n      const createParams: CreateScheduleParams = {\n        ...params,\n        ownerId: ownerId,\n        ownerType: ownerResourceType,\n      } as CreateScheduleParams;\n      createNewSchedule.mutate({ ...createParams });\n    } else {\n      saveScheduleChanges.mutate({ ...params });\n    }\n  }\n\n  const setActiveStatus = async (isActive: boolean): Promise<void> => {\n    if (!oystehr || !item?.id) {\n      enqueueSnackbar('Oops. Something went wrong. Please reload the page and try again.', { variant: 'error' });\n      return;\n    }\n    try {\n      setStatusPatchLoading(true);\n      const value: string | boolean = item.owner.type === 'Location' ? (isActive ? 'active' : 'inactive') : isActive;\n      const patched = await oystehr.fhir.patch<Location | Practitioner>({\n        resourceType: item.owner.type as 'Location' | 'Practitioner',\n        id: item.owner.id,\n        operations: [\n          {\n            path: item.owner.type === 'Location' ? '/status' : '/active',\n            op: 'add',\n            value,\n          },\n        ],\n      });\n      let newActiveStatus = isActive;\n      if (patched.resourceType === 'Location') {\n        newActiveStatus = patched.status === 'active';\n      } else {\n        newActiveStatus = patched.active === true;\n      }\n      await saveGeneralFields();\n      setItem({\n        ...item,\n        owner: {\n          ...item.owner,\n          active: newActiveStatus,\n        },\n      });\n    } catch {\n      enqueueSnackbar('Oops. Something went wrong. Status update was not saved.', { variant: 'error' });\n    } finally {\n      setStatusPatchLoading(false);\n    }\n  };\n\n  const saveGeneralFields = async (_event?: any): Promise<void> => {\n    if (!oystehr || !item?.id) {\n      enqueueSnackbar('Oops. Something went wrong. Please reload the page and try again.', { variant: 'error' });\n      return;\n    }\n    const params: UpdateScheduleParams = {\n      scheduleId: item.id,\n      timezone,\n      slug,\n    };\n    saveScheduleChanges.mutate({ ...params });\n  };\n\n  return (\n    <PageContainer>\n      <>\n        {item ? (\n          <Box>\n            {/* Breadcrumbs */}\n            <CustomBreadcrumbs\n              chain={[\n                { link: '/schedules', state: { defaultTab: scheduleType }, children: 'Schedules' },\n                { link: '#', children: item?.owner?.name || <Skeleton width={150} /> },\n              ]}\n            />\n\n            {/* Page title */}\n            <Typography variant=\"h3\" color=\"primary.dark\" marginTop={1}>\n              {item?.owner?.name || <Skeleton width={150} />}\n            </Typography>\n            {/* Address line */}\n            {item?.owner.detailText && (\n              <Typography marginBottom={1} fontWeight={400}>\n                {item.owner.detailText}\n              </Typography>\n            )}\n            {/* Tabs */}\n            <TabContext value={tabName}>\n              <Box sx={{ borderBottom: 1, borderColor: 'divider', display: createMode ? 'none' : 'block' }}>\n                <TabList onChange={handleTabChange} aria-label=\"Tabs\">\n                  <Tab label=\"Schedule\" value=\"schedule\" sx={{ textTransform: 'none', fontWeight: 700 }} />\n                  <Tab label=\"General\" value=\"general\" sx={{ textTransform: 'none', fontWeight: 700 }} />\n                </TabList>\n              </Box>\n              {/* Page Content */}\n              {/* Time slots tab */}\n              <Paper\n                sx={{\n                  marginTop: 2,\n                  border: 'none',\n                  boxShadow: 'none',\n                  background: 'none',\n                }}\n              >\n                <TabPanel value=\"schedule\" sx={{ padding: 0 }}>\n                  {(scheduleId || createMode) && (\n                    <ScheduleComponent\n                      id={scheduleId || 'new'}\n                      item={item}\n                      loading={somethingIsLoadingInSomeWay}\n                      update={onSaveSchedule}\n                      hideOverrides={createMode}\n                    />\n                  )}\n                </TabPanel>\n                {/* General tab */}\n                <TabPanel value=\"general\">\n                  <Paper sx={{ marginBottom: 2, padding: 3 }}>\n                    <Box display={'flex'} alignItems={'center'}>\n                      <Switch\n                        checked={item.owner.active}\n                        onClick={() => setActiveStatus(!item.owner.active)}\n                        disabled={statusPatchLoading}\n                      />\n                      {statusPatchLoading ? (\n                        <CircularProgress size={24} color=\"inherit\" />\n                      ) : (\n                        <Typography>{item.owner.active ? 'Active' : 'Inactive'}</Typography>\n                      )}\n                    </Box>\n                    <hr />\n                    <br />\n\n                    <form\n                      onSubmit={(e) => {\n                        e.preventDefault();\n                        void saveGeneralFields(e);\n                      }}\n                    >\n                      <TextField\n                        label=\"Slug\"\n                        value={slug}\n                        onChange={(event) => setSlug(event.target.value)}\n                        sx={{ width: '250px' }}\n                      />\n                      <br />\n\n                      <Typography variant=\"body2\" sx={{ pt: 1, pb: 0.5, fontWeight: 600 }}>\n                        Share booking link to this schedule:\n                      </Typography>\n                      <Box sx={{ display: defaultIntakeUrl ? 'flex' : 'none', alignItems: 'center', gap: 0.5, mb: 3 }}>\n                        <Tooltip\n                          title={isCopied ? 'Link copied!' : 'Copy link'}\n                          placement=\"top\"\n                          arrow\n                          onClose={() => {\n                            setTimeout(() => {\n                              setIsCopied(false);\n                            }, 200);\n                          }}\n                        >\n                          <Button\n                            onClick={() => {\n                              void navigator.clipboard.writeText(defaultIntakeUrl);\n                              setIsCopied(true);\n                            }}\n                            sx={{ p: 0, minWidth: 0 }}\n                          >\n                            <ContentCopyRoundedIcon fontSize=\"small\" />\n                          </Button>\n                        </Tooltip>\n                        <Link to={defaultIntakeUrl} target=\"_blank\">\n                          <Typography variant=\"body2\">{defaultIntakeUrl}</Typography>\n                        </Link>\n                      </Box>\n                      <Autocomplete\n                        options={TIMEZONES}\n                        renderInput={(params) => <TextField {...params} label=\"Timezone\" />}\n                        sx={{ marginTop: 2, width: '250px' }}\n                        value={timezone}\n                        onChange={(_event, newValue) => {\n                          if (newValue) {\n                            setTimezone(newValue);\n                          }\n                        }}\n                      />\n                      <br />\n                      <LoadingButton\n                        type=\"submit\"\n                        loading={somethingIsLoadingInSomeWay}\n                        variant=\"contained\"\n                        sx={{ marginTop: 2 }}\n                      >\n                        Save\n                      </LoadingButton>\n                    </form>\n                  </Paper>\n                  <Paper sx={{ padding: 3 }}>\n                    <Grid container direction=\"row\" justifyContent=\"flex-start\" alignItems=\"flex-start\">\n                      <Grid item xs={6}>\n                        <Typography variant=\"h4\" color={'primary.dark'}>\n                          Information to the patients\n                        </Typography>\n                        <Typography variant=\"body1\" color=\"primary.dark\" marginTop={1}>\n                          This message will be displayed to the patients before they proceed with booking the visit.\n                        </Typography>\n                        <Box\n                          marginTop={2}\n                          sx={{\n                            background: otherColors.locationGeneralBlue,\n                            borderRadius: 1,\n                          }}\n                          padding={3}\n                        >\n                          <Typography color=\"primary.dark\" variant=\"body1\">\n                            No description\n                          </Typography>\n                        </Box>\n                      </Grid>\n                    </Grid>\n                  </Paper>\n                </TabPanel>\n              </Paper>\n            </TabContext>\n          </Box>\n        ) : (\n          <Loading />\n        )}\n      </>\n    </PageContainer>\n  );\n}\n"]}