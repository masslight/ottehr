{"version":3,"file":"PastVisits.js","sourceRoot":"","sources":["PastVisits.tsx"],"names":[],"mappings":"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","sourcesContent":["import CloseIcon from '@mui/icons-material/Close';\nimport { Box, Dialog, IconButton, Link, Skeleton, Typography } from '@mui/material';\nimport React, { FC, useState } from 'react';\nimport { dataTestIds } from 'src/constants/data-test-ids';\nimport { PastVisitsTable } from '../../../components/PastVisitsTable';\nimport { useGetPatient } from '../../../hooks/useGetPatient';\nimport { getSelectors } from '../../../shared/store/getSelectors';\nimport { useAppointmentStore } from '../../state';\nimport { getPatientName } from '../../utils';\n\nexport const PastVisits: FC = () => {\n  const { patient } = getSelectors(useAppointmentStore, ['patient']);\n  const { appointments, loading } = useGetPatient(patient?.id);\n  const [open, setOpen] = useState(false);\n\n  const patientName = getPatientName(patient?.name).lastFirstMiddleName;\n\n  if (loading) {\n    return <Skeleton sx={{ display: 'inline-block' }} variant=\"text\" width={100} />;\n  }\n\n  if (!appointments?.length || appointments.length == 1) {\n    return (\n      <Typography data-testid={dataTestIds.telemedEhrFlow.telemedNewOrExistingPatient} variant=\"body2\">\n        New patient\n      </Typography>\n    );\n  }\n\n  return (\n    <>\n      <Typography variant=\"body2\">\n        Established patient:\n        <Link\n          sx={{ cursor: 'pointer', color: 'inherit' }}\n          onClick={() => setOpen(true)}\n          data-testid={dataTestIds.telemedEhrFlow.telemedNewOrExistingPatient}\n        >\n          {appointments.length} visit{appointments.length > 1 && 's'}\n        </Link>\n      </Typography>\n\n      {open && (\n        <Dialog open={open} onClose={() => setOpen(false)} maxWidth=\"lg\" fullWidth>\n          <IconButton size=\"small\" onClick={() => setOpen(false)} sx={{ position: 'absolute', right: 16, top: 16 }}>\n            <CloseIcon fontSize=\"small\" />\n          </IconButton>\n\n          <Box sx={{ p: 3, display: 'flex', flexDirection: 'column', gap: 2 }}>\n            <Typography variant=\"h4\" color=\"primary.dark\">\n              Past Visits - {patientName}\n            </Typography>\n            <Box sx={{ maxHeight: '700px', overflowY: 'scroll' }}>\n              <PastVisitsTable appointments={appointments} stickyHeader />\n            </Box>\n          </Box>\n        </Dialog>\n      )}\n    </>\n  );\n};\n"]}