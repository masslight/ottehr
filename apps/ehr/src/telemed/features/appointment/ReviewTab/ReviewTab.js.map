{"version":3,"file":"ReviewTab.js","sourceRoot":"","sources":["ReviewTab.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Box, CircularProgress } from '@mui/material';\nimport { FC, useCallback, useRef } from 'react';\nimport { useFeatureFlags } from 'src/features/css-module/context/featureFlags';\nimport { telemedProgressNoteChartDataRequestedFields } from 'utils/lib/helpers/visit-note/progress-note-chart-data-requested-fields.helper';\nimport { useChartData } from '../../../../features/css-module/hooks/useChartData';\nimport { getSelectors } from '../../../../shared/store/getSelectors';\nimport { useAppointmentStore, useGetReviewAndSignData } from '../../../state';\nimport { AddendumCard } from './AddendumCard';\nimport { MissingCard } from './MissingCard';\nimport { ReviewAndSignButton } from './ReviewAndSignButton';\nimport { SendFaxButton } from './SendFaxButton';\nimport { VisitNoteCard } from './VisitNoteCard';\n\nexport const ReviewTab: FC = () => {\n  const isInitialLoad = useRef(true);\n  const { appointment, encounter, isChartDataLoading, setPartialChartData } = getSelectors(useAppointmentStore, [\n    'appointment',\n    'encounter',\n    'isChartDataLoading',\n    'setPartialChartData',\n  ]);\n\n  const { css } = useFeatureFlags();\n\n  const { isFetching } = useChartData({\n    encounterId: encounter.id || '',\n    requestedFields: telemedProgressNoteChartDataRequestedFields,\n    onSuccess: (data) => {\n      isInitialLoad.current = false;\n      setPartialChartData({\n        prescribedMedications: data.prescribedMedications,\n        disposition: data.disposition,\n        medicalDecision: data.medicalDecision,\n      });\n    },\n    onError: () => {\n      isInitialLoad.current = false;\n    },\n    enabled: isInitialLoad.current,\n  });\n\n  const { refetch: refetchReviewAndSingData } = useGetReviewAndSignData(\n    {\n      appointmentId: appointment?.id,\n      runImmediately: false,\n    },\n    (reviewAndSignData) => {\n      useAppointmentStore.setState({ reviewAndSignData: reviewAndSignData });\n    }\n  );\n\n  const onAppointmentSigned = useCallback(async (): Promise<void> => {\n    await refetchReviewAndSingData();\n  }, [refetchReviewAndSingData]);\n\n  if (isChartDataLoading || isFetching) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center' }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        flexDirection: 'column',\n        gap: 1,\n      }}\n    >\n      <MissingCard />\n      <VisitNoteCard />\n      <AddendumCard />\n      <Box sx={{ display: 'flex', justifyContent: 'end', gap: 1 }}>\n        <SendFaxButton appointment={appointment} encounter={encounter} css={css} />\n        <ReviewAndSignButton onSigned={onAppointmentSigned} />\n      </Box>\n    </Box>\n  );\n};\n"]}