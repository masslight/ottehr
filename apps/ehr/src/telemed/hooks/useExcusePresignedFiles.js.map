{"version":3,"file":"useExcusePresignedFiles.js","sourceRoot":"","sources":["useExcusePresignedFiles.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,kDAA8C;AAC9C,+BAA4C;AAE5C,2DAAiE;AAI1D,IAAM,uBAAuB,GAAG,UACrC,eAAkD;IAE1C,IAAA,sBAAsB,GAAK,IAAA,sBAAQ,GAAE,uBAAf,CAAgB;IACxC,IAAA,KAAsC,IAAA,gBAAQ,EAAyC,EAAE,CAAC,EAAzF,cAAc,QAAA,EAAE,iBAAiB,QAAwD,CAAC;IAEjG,IAAA,iBAAS,EAAC;QACR,IAAM,KAAK,GAAG;;;;;wBACZ,IAAI,CAAC,eAAe,EAAE,CAAC;4BACrB,sBAAO;wBACT,CAAC;wBAEiB,qBAAM,sBAAsB,EAAE,EAAA;;wBAA1C,SAAS,GAAG,SAA8B;wBAC1C,IAAI,GAAG,EAAE,CAAC;8BAEkB,EAAf,mCAAe;;;6BAAf,CAAA,6BAAe,CAAA;wBAAvB,IAAI;wBACQ,qBAAM,IAAA,kCAAmB,EAAC,IAAI,CAAC,GAAI,EAAE,SAAS,CAAC,EAAA;;wBAA9D,YAAY,GAAG,SAA+C;wBACpE,IAAI,CAAC,IAAI,uBAAM,IAAI,KAAE,YAAY,cAAA,IAAG,CAAC;;;wBAFpB,IAAe,CAAA;;;wBAKlC,iBAAiB,CAAC,IAAI,CAAC,CAAC;;;;aACzB,CAAC;QAEF,KAAK,KAAK,EAAE,CAAC;IACf,CAAC,EAAE,CAAC,eAAe,EAAE,sBAAsB,CAAC,CAAC,CAAC;IAE9C,OAAO,cAAc,CAAC;AACxB,CAAC,CAAC;AA3BW,QAAA,uBAAuB,2BA2BlC","sourcesContent":["import { useAuth0 } from '@auth0/auth0-react';\nimport { useEffect, useState } from 'react';\nimport { SchoolWorkNoteExcuseDocFileDTO } from 'utils';\nimport { getPresignedFileUrl } from '../../helpers/files.helper';\n\ntype SchoolWorkNoteExcuseDocFilePresigned = SchoolWorkNoteExcuseDocFileDTO & { presignedUrl?: string };\n\nexport const useExcusePresignedFiles = (\n  schoolWorkNotes?: SchoolWorkNoteExcuseDocFileDTO[]\n): SchoolWorkNoteExcuseDocFilePresigned[] => {\n  const { getAccessTokenSilently } = useAuth0();\n  const [presignedFiles, setPresignedFiles] = useState<SchoolWorkNoteExcuseDocFilePresigned[]>([]);\n\n  useEffect(() => {\n    const fetch = async (): Promise<void> => {\n      if (!schoolWorkNotes) {\n        return;\n      }\n\n      const authToken = await getAccessTokenSilently();\n      const urls = [];\n\n      for (const item of schoolWorkNotes) {\n        const presignedUrl = await getPresignedFileUrl(item.url!, authToken);\n        urls.push({ ...item, presignedUrl });\n      }\n\n      setPresignedFiles(urls);\n    };\n\n    void fetch();\n  }, [schoolWorkNotes, getAccessTokenSilently]);\n\n  return presignedFiles;\n};\n"]}