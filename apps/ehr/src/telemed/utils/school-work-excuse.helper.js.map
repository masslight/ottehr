{"version":3,"file":"school-work-excuse.helper.js","sourceRoot":"","sources":["school-work-excuse.helper.ts"],"names":[],"mappings":"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","sourcesContent":["import { DateTime } from 'luxon';\nimport { PROJECT_NAME, SchoolWorkNoteExcuseDocDTO } from 'utils';\nimport { ArrayElement } from '../../shared/types';\n\nexport const mapExcuseTypeToFields = {\n  workTemplate: ['headerNote', 'workFields', 'footerNote'],\n  workFree: ['headerNote'],\n  schoolTemplate: ['headerNote', 'schoolFields', 'footerNote'],\n  schoolFree: ['headerNote'],\n};\n\nexport const workExcuseFields = [\n  'wereWithThePatientAtTheTimeOfTheVisit',\n  'areNeededAtHomeToCareForChildDuringThisIllness',\n  'workExcusedFromWorkFromTo',\n  'workExcusedFromWorkOn',\n] as const;\n\nexport const schoolExcuseFields = [\n  'excusedFromSchoolFromTo',\n  'excusedFromSchoolOn',\n  'excusedFromSchoolUntilFeverFreeFor24Hours',\n  'excusedFromSchoolUntilOnAntibioticsFor24Hours',\n  'ableToReturnToSchoolWithoutRestriction',\n  'ableToReturnToGymActivitiesWithoutRestriction',\n  'ableToReturnToSchoolWhenThereNoLongerIsAnyEyeDischarge',\n  'excusedFromGymActivitiesFromTo',\n  'ableToReturnToSchoolWithTheFollowingRestrictions',\n  'dominantHandIsInjuredPleaseAllowAccommodations',\n  'needsExtraTimeBetweenClassesAssistantOrBookBuddy',\n  'otherRestrictions',\n  'allowedUseOfCrutchesAceWrapSplintAndElevatorAsNecessary',\n  'allowedUseOfElevatorAsNecessary',\n  'unableToParticipateInGymActivitiesUntilClearedByAPhysician',\n  'schoolExcusedFromWorkFromTo',\n  'schoolExcusedFromWorkOn',\n  'ableToReturnToWorkWithTheFollowingRestrictions',\n  'other',\n] as const;\n\nexport const dateExcuseFields = [\n  'schoolExcusedFromWorkFromDate',\n  'schoolExcusedFromWorkToDate',\n  'schoolExcusedFromWorkOnDate',\n  'workExcusedFromWorkFromDate',\n  'workExcusedFromWorkToDate',\n  'workExcusedFromWorkOnDate',\n  'excusedFromSchoolFromDate',\n  'excusedFromSchoolToDate',\n  'excusedFromSchoolOnDate',\n  'excusedFromGymActivitiesFromDate',\n  'excusedFromGymActivitiesToDate',\n] as const;\n\nexport const noteExcuseFields = [\n  'parentName',\n  'headerNote',\n  'footerNote',\n  'otherRestrictionsNote',\n  'ableToReturnToWorkWithTheFollowingRestrictionsNote',\n  'otherNote',\n] as const;\n\nexport type WorkExcuseFields = ArrayElement<typeof workExcuseFields>;\nexport type SchoolExcuseFields = ArrayElement<typeof schoolExcuseFields>;\nexport type DateExcuseFields = ArrayElement<typeof dateExcuseFields>;\nexport type NoteExcuseFields = ArrayElement<typeof noteExcuseFields>;\n\nexport type ExcuseFormValues = { [key in WorkExcuseFields]: boolean } & { [key in SchoolExcuseFields]: boolean } & {\n  [key in DateExcuseFields]: DateTime | null;\n} & {\n  [key in NoteExcuseFields]: string;\n};\n\nexport const mapExcuseFieldsToLabels = {\n  wereWithThePatientAtTheTimeOfTheVisit: 'were with the patient at the time of the visit',\n  areNeededAtHomeToCareForChildDuringThisIllness: 'are needed at home to care for child during this illness',\n  schoolExcusedFromWorkFromTo: 'excused from work from - to',\n  schoolExcusedFromWorkOn: 'excused from work on',\n  workExcusedFromWorkFromTo: 'are excused from work from - to',\n  workExcusedFromWorkOn: 'are excused from work on',\n  excusedFromSchoolFromTo: 'excused from school from - to',\n  excusedFromSchoolOn: 'excused from school on',\n  excusedFromSchoolUntilFeverFreeFor24Hours: 'excused from school until fever free for 24 hours',\n  excusedFromSchoolUntilOnAntibioticsFor24Hours: 'excused from school until on antibiotics for 24 hours',\n  ableToReturnToSchoolWithoutRestriction: 'able to return to school without restriction',\n  ableToReturnToGymActivitiesWithoutRestriction: 'able to return to gym/activities without restriction',\n  ableToReturnToSchoolWhenThereNoLongerIsAnyEyeDischarge:\n    'able to return to school when there no longer is any eye discharge',\n  excusedFromGymActivitiesFromTo: 'excused from gym/activities from - to',\n  ableToReturnToSchoolWithTheFollowingRestrictions: 'able to return to school with the following restrictions:',\n  dominantHandIsInjuredPleaseAllowAccommodations: 'dominant hand is injured, please allow accommodations',\n  needsExtraTimeBetweenClassesAssistantOrBookBuddy: 'needs extra time between classes, assistant or book buddy',\n  otherRestrictions: 'other',\n  allowedUseOfCrutchesAceWrapSplintAndElevatorAsNecessary:\n    'allowed use of crutches, ace wrap, splint and elevator as necessary',\n  allowedUseOfElevatorAsNecessary: 'allowed use of elevator as necessary',\n  unableToParticipateInGymActivitiesUntilClearedByAPhysician:\n    'unable to participate in gym activities until cleared by a physician',\n  ableToReturnToWorkWithTheFollowingRestrictions: 'able to return to work with the following restrictions',\n  other: 'other',\n} as const;\n\nconst mapCompositeExcuseFieldsToLabels: {\n  [P in SchoolExcuseFields | WorkExcuseFields]?: (values: ExcuseFormValues) => string;\n} = {\n  schoolExcusedFromWorkFromTo: (values: ExcuseFormValues) =>\n    `excused from work from ${values.schoolExcusedFromWorkFromDate!.toFormat(\n      'MM/dd/yyyy'\n    )} to ${values.schoolExcusedFromWorkToDate!.toFormat('MM/dd/yyyy')}`,\n  schoolExcusedFromWorkOn: (values: ExcuseFormValues) =>\n    `excused from work on ${values.schoolExcusedFromWorkOnDate!.toFormat('MM/dd/yyyy')}`,\n  workExcusedFromWorkFromTo: (values: ExcuseFormValues) =>\n    `excused from work from ${values.workExcusedFromWorkFromDate!.toFormat(\n      'MM/dd/yyyy'\n    )} to ${values.workExcusedFromWorkToDate!.toFormat('MM/dd/yyyy')}`,\n  workExcusedFromWorkOn: (values: ExcuseFormValues) =>\n    `excused from work on ${values.workExcusedFromWorkOnDate!.toFormat('MM/dd/yyyy')}`,\n  excusedFromSchoolFromTo: (values: ExcuseFormValues) =>\n    `excused from school from ${values.excusedFromSchoolFromDate!.toFormat(\n      'MM/dd/yyyy'\n    )} to ${values.excusedFromSchoolToDate!.toFormat('MM/dd/yyyy')}`,\n  excusedFromSchoolOn: (values: ExcuseFormValues) =>\n    `excused from school on ${values.excusedFromSchoolOnDate!.toFormat('MM/dd/yyyy')}`,\n  excusedFromGymActivitiesFromTo: (values: ExcuseFormValues) =>\n    `excused from gym/activities from ${values.excusedFromGymActivitiesFromDate!.toFormat(\n      'MM/dd/yyyy'\n    )} to ${values.excusedFromGymActivitiesToDate!.toFormat('MM/dd/yyyy')}`,\n  otherRestrictions: (values: ExcuseFormValues) => values.otherRestrictionsNote,\n  other: (values: ExcuseFormValues) => values.otherNote,\n};\n\nexport const getDefaultExcuseFormValues = (params: {\n  patientName?: string;\n  parentName?: string;\n  isSchool: boolean;\n  isTemplate: boolean;\n  providerName?: string;\n  suffix?: string;\n  phoneNumber?: string;\n}): ExcuseFormValues => {\n  const defaultFormValues = {\n    ...noteExcuseFields.reduce((prev, curr) => ({ ...prev, [curr]: '' }), {}),\n    ...dateExcuseFields.reduce((prev, curr) => ({ ...prev, [curr]: null }), {}),\n    ...schoolExcuseFields.reduce((prev, curr) => ({ ...prev, [curr]: false }), {}),\n    ...workExcuseFields.reduce((prev, curr) => ({ ...prev, [curr]: false }), {}),\n    schoolExcusedFromWorkFromDate: DateTime.now(),\n    schoolExcusedFromWorkOnDate: DateTime.now(),\n    workExcusedFromWorkFromDate: DateTime.now(),\n    workExcusedFromWorkOnDate: DateTime.now(),\n    excusedFromSchoolFromDate: DateTime.now(),\n    excusedFromSchoolOnDate: DateTime.now(),\n    excusedFromGymActivitiesFromDate: DateTime.now(),\n  } as ExcuseFormValues;\n\n  const currentDate = DateTime.now().toFormat('MM/dd/yyyy');\n\n  if (params.parentName) {\n    defaultFormValues.parentName = params.parentName;\n  }\n\n  const headerNoteName = params.isSchool\n    ? `${params.patientName || '{Patient name}'}, the child of ${params.parentName || '{Parent/Guardian name}'},`\n    : `${params.patientName || '{Patient name}'},`;\n\n  const headerNoteEnding = !params.isSchool && params.isTemplate ? 'They:' : 'They are:';\n  defaultFormValues.headerNote = `To whom it may concern:\\n${headerNoteName} was treated by ${PROJECT_NAME} on ${currentDate}. ${headerNoteEnding}`;\n\n  if (params.isTemplate) {\n    if (params.phoneNumber) {\n      defaultFormValues.footerNote = `For any questions, please do not hesitate to call ${params.phoneNumber}.\\n`;\n    }\n    defaultFormValues.footerNote += `Sincerely,\\n${params.providerName || '{Provider name}'}, ${\n      params.suffix || 'Medical Doctor'\n    }`;\n  }\n\n  return defaultFormValues;\n};\n\nexport const mapValuesToExcuse = (\n  values: ExcuseFormValues,\n  params: {\n    type: keyof typeof mapExcuseTypeToFields;\n    isSchool: boolean;\n    isTemplate: boolean;\n    patientName?: string;\n    providerName?: string;\n    suffix?: string;\n  }\n): SchoolWorkNoteExcuseDocDTO => {\n  const excuse: SchoolWorkNoteExcuseDocDTO = {\n    type: params.isSchool ? 'school' : 'work',\n    documentHeader: params.isSchool\n      ? `School note for ${params.patientName || 'Unknown'}`\n      : `Work note for ${values.parentName}`,\n    parentGuardianName: values.parentName || 'Unknown',\n    headerNote: values.headerNote,\n    footerNote: values.footerNote,\n    providerDetails: {\n      credentials: params.suffix || '',\n      name: params.providerName || 'Unknown',\n    },\n  };\n\n  if (params.isTemplate) {\n    excuse.bulletItems = [];\n\n    const subFields: Record<string, string[]> = {\n      ableToReturnToSchoolWithTheFollowingRestrictions: [\n        'dominantHandIsInjuredPleaseAllowAccommodations',\n        'needsExtraTimeBetweenClassesAssistantOrBookBuddy',\n        'otherRestrictions',\n      ],\n    };\n    let currentSubFields: string[] | undefined;\n\n    const excuseFields = params.isSchool ? schoolExcuseFields : workExcuseFields;\n\n    excuseFields.forEach((field) => {\n      if (!values[field]) {\n        return;\n      }\n\n      const func = mapCompositeExcuseFieldsToLabels[field];\n      const str = func ? func(values) : mapExcuseFieldsToLabels[field];\n\n      if (subFields[field]) {\n        currentSubFields = subFields[field];\n      }\n\n      if (currentSubFields?.includes(field)) {\n        const currentItem = excuse.bulletItems!.at(-1)!;\n        if (!currentItem.subItems) {\n          currentItem.subItems = [];\n        }\n        currentItem.subItems.push({\n          text: str,\n        });\n      } else {\n        excuse.bulletItems!.push({\n          text: str,\n        });\n      }\n    });\n\n    if (excuse.bulletItems!.length === 0) {\n      delete excuse.bulletItems;\n    }\n  }\n\n  return excuse;\n};\n"]}