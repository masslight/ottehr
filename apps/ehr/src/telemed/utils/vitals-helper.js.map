{"version":3,"file":"vitals-helper.js","sourceRoot":"","sources":["vitals-helper.ts"],"names":[],"mappings":"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","sourcesContent":["import { QuestionnaireResponse } from 'fhir/r4b';\nimport { DateTime } from 'luxon';\nimport { useAppointmentStore } from '../state';\n\nexport const updateQuestionnaireResponse = (\n  questionnaireResponse: QuestionnaireResponse | undefined,\n  name: string,\n  value: string\n): void => {\n  if (questionnaireResponse) {\n    if (questionnaireResponse.item?.find((item) => item.linkId === name)) {\n      useAppointmentStore.setState({\n        questionnaireResponse: {\n          ...questionnaireResponse,\n          item: questionnaireResponse?.item?.map((item) =>\n            item.linkId === name ? { ...item, answer: [{ valueString: value }] } : item\n          ),\n        },\n      });\n    } else {\n      const newItem = { linkId: name, answer: [{ valueString: value }] };\n      if (!questionnaireResponse.item) {\n        useAppointmentStore.setState({\n          questionnaireResponse: {\n            ...questionnaireResponse,\n            item: [newItem],\n          },\n        });\n      } else {\n        useAppointmentStore.setState({\n          questionnaireResponse: {\n            ...questionnaireResponse,\n            item: [...questionnaireResponse.item, newItem],\n          },\n        });\n      }\n    }\n  }\n};\n\nexport const isNumberValidation = (value: string): string | undefined => {\n  if (isNaN(+value) || isNaN(parseFloat(value))) {\n    return 'Value must be a number';\n  }\n  return;\n};\n\nexport const isEmptyValidation = (value: string): boolean => {\n  return value === '';\n};\n\ntype ValidationValues = {\n  temperature: {\n    high: number;\n  };\n  pulse: {\n    high: number;\n  };\n  hr: {\n    high: number;\n  };\n  rr: {\n    high: number;\n  };\n};\n\nexport const getValidationValuesByDOB = (dob: string): ValidationValues => {\n  const now = DateTime.now();\n  const birthDate = DateTime.fromISO(dob);\n  const age = now.diff(birthDate, 'years').years;\n\n  for (const group of ageGroups) {\n    if (age >= group.minAge && age < group.maxAge) {\n      return group.value;\n    }\n  }\n\n  throw new Error('Invalid BOD');\n};\n\nconst ageGroups: { minAge: number; maxAge: number; value: ValidationValues }[] = [\n  {\n    minAge: 0,\n    maxAge: 0.25,\n    value: {\n      temperature: {\n        high: 46,\n      },\n      pulse: {\n        high: 100,\n      },\n      hr: {\n        high: 290,\n      },\n      rr: {\n        high: 90,\n      },\n    },\n  },\n  {\n    minAge: 0.25,\n    maxAge: 0.5,\n    value: {\n      temperature: {\n        high: 46,\n      },\n      pulse: {\n        high: 100,\n      },\n      hr: {\n        high: 290,\n      },\n      rr: {\n        high: 90,\n      },\n    },\n  },\n  {\n    minAge: 0.5,\n    maxAge: 0.75,\n    value: {\n      temperature: {\n        high: 46,\n      },\n      pulse: {\n        high: 100,\n      },\n      hr: {\n        high: 290,\n      },\n      rr: {\n        high: 90,\n      },\n    },\n  },\n  {\n    minAge: 0.75,\n    maxAge: 1,\n    value: {\n      temperature: {\n        high: 46,\n      },\n      pulse: {\n        high: 100,\n      },\n      hr: {\n        high: 290,\n      },\n      rr: {\n        high: 90,\n      },\n    },\n  },\n  {\n    minAge: 1,\n    maxAge: 1.5,\n    value: {\n      temperature: {\n        high: 46,\n      },\n      pulse: {\n        high: 100,\n      },\n      hr: {\n        high: 290,\n      },\n      rr: {\n        high: 90,\n      },\n    },\n  },\n  {\n    minAge: 1.5,\n    maxAge: 2,\n    value: {\n      temperature: {\n        high: 46,\n      },\n      pulse: {\n        high: 100,\n      },\n      hr: {\n        high: 290,\n      },\n      rr: {\n        high: 90,\n      },\n    },\n  },\n  {\n    minAge: 2,\n    maxAge: 3,\n    value: {\n      temperature: {\n        high: 46,\n      },\n      pulse: {\n        high: 100,\n      },\n      hr: {\n        high: 290,\n      },\n      rr: {\n        high: 90,\n      },\n    },\n  },\n  {\n    minAge: 3,\n    maxAge: 4,\n    value: {\n      temperature: {\n        high: 46,\n      },\n      pulse: {\n        high: 100,\n      },\n      hr: {\n        high: 290,\n      },\n      rr: {\n        high: 90,\n      },\n    },\n  },\n  {\n    minAge: 4,\n    maxAge: 6,\n    value: {\n      temperature: {\n        high: 46,\n      },\n      pulse: {\n        high: 100,\n      },\n      hr: {\n        high: 290,\n      },\n      rr: {\n        high: 90,\n      },\n    },\n  },\n  {\n    minAge: 6,\n    maxAge: 8,\n    value: {\n      temperature: {\n        high: 46,\n      },\n      pulse: {\n        high: 100,\n      },\n      hr: {\n        high: 290,\n      },\n      rr: {\n        high: 90,\n      },\n    },\n  },\n  {\n    minAge: 8,\n    maxAge: 12,\n    value: {\n      temperature: {\n        high: 46,\n      },\n      pulse: {\n        high: 100,\n      },\n      hr: {\n        high: 290,\n      },\n      rr: {\n        high: 90,\n      },\n    },\n  },\n  {\n    minAge: 12,\n    maxAge: 15,\n    value: {\n      temperature: {\n        high: 46,\n      },\n      pulse: {\n        high: 100,\n      },\n      hr: {\n        high: 290,\n      },\n      rr: {\n        high: 90,\n      },\n    },\n  },\n  {\n    minAge: 15,\n    maxAge: 18,\n    value: {\n      temperature: {\n        high: 46,\n      },\n      pulse: {\n        high: 100,\n      },\n      hr: {\n        high: 290,\n      },\n      rr: {\n        high: 90,\n      },\n    },\n  },\n  {\n    minAge: 18,\n    maxAge: Infinity,\n    value: {\n      temperature: {\n        high: 46,\n      },\n      pulse: {\n        high: 100,\n      },\n      hr: {\n        high: 290,\n      },\n      rr: {\n        high: 90,\n      },\n    },\n  },\n];\n"]}