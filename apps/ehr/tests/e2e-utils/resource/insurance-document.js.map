{"version":3,"file":"insurance-document.js","sourceRoot":"","sources":["insurance-document.ts"],"names":[],"mappings":";;;;;;;;;;;AAqBA,0DAqEC;AArED,SAAgB,uBAAuB,CAAC,EAgBd;QAfxB,cAAqB,EAArB,MAAM,mBAAG,YAAY,KAAA,EACrB,YAA+B,EAA/B,IAAI,mBAAG,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,KAAA,EAC/B,SAAS,eAAA,EACT,aAAa,mBAAA,EACb,gBAA4J,EAA5J,QAAQ,mBAAG,iJAAiJ,KAAA,EAC5J,eAA0J,EAA1J,OAAO,mBAAG,gJAAgJ,KAAA,EAC1J,wBAA+B,EAA/B,gBAAgB,mBAAG,YAAY,KAAA,EAC/B,uBAA8B,EAA9B,eAAe,mBAAG,YAAY,KAAA,EAC9B,eAAqB,EAArB,OAAO,mBAAG,WAAW,KAAA,EACrB,YAKC,EALD,IAAI,mBAAG;QACL,MAAM,EAAE,kBAAkB;QAC1B,IAAI,EAAE,SAAS;QACf,OAAO,EAAE,uBAAuB;QAChC,IAAI,EAAE,iBAAiB;KACxB,KAAA;IAED,OAAO;QACL,YAAY,EAAE,mBAAmB;QACjC,IAAI,EAAE;YACJ,GAAG,EAAE;gBACH;oBACE,IAAI,EAAE,OAAO,EAAE,wEAAwE;iBACxF;aACF;SACF;QACD,MAAM,QAAA;QACN,IAAI,EAAE;YACJ,MAAM,EAAE;gBACN;oBACE,MAAM,EAAE,IAAI,CAAC,MAAM;oBACnB,IAAI,EAAE,IAAI,CAAC,IAAI;oBACf,OAAO,EAAE,IAAI,CAAC,OAAO;iBACtB;aACF;YACD,IAAI,EAAE,IAAI,CAAC,IAAI;SAChB;QACD,IAAI,MAAA;QACJ,OAAO;YACL;gBACE,UAAU,EAAE;oBACV,GAAG,EAAE,QAAQ;oBACb,WAAW,EAAE,gBAAgB;oBAC7B,KAAK,EAAE,sBAAsB;iBAC9B;aACF;WACE,CAAC,OAAO;YACT,CAAC,CAAC;gBACE;oBACE,UAAU,EAAE;wBACV,GAAG,EAAE,OAAO;wBACZ,WAAW,EAAE,eAAe;wBAC5B,KAAK,EAAE,qBAAqB;qBAC7B;iBACF;aACF;YACH,CAAC,CAAC,EAAE,CAAC,OACR;QACD,OAAO,EAAE;YACP,OAAO,EAAE;gBACP;oBACE,SAAS,EAAE,kBAAW,SAAS,CAAE;iBAClC;gBACD;oBACE,SAAS,EAAE,sBAAe,aAAa,CAAE;iBAC1C;aACF;SACF;KACF,CAAC;AACJ,CAAC","sourcesContent":["import { DocumentReference } from 'fhir/r4b';\n// import { INSURANCE_CARD_CODE, OTTEHR_MODULE } from 'utils';\n\ninterface DocumentReferenceParams {\n  status?: DocumentReference['status'];\n  date?: string;\n  patientId: string;\n  appointmentId: string;\n  frontUrl?: string;\n  backUrl?: string;\n  frontContentType?: string;\n  backContentType?: string;\n  tagCode?: string;\n  type?: {\n    system?: string;\n    code?: string;\n    display?: string;\n    text?: string;\n  };\n}\n\nexport function createDocumentReference({\n  status = 'superseded',\n  date = new Date().toISOString(),\n  patientId,\n  appointmentId,\n  frontUrl = 'https://testing.project-api.zapehr.com/v1/z3/local-insurance-cards/2bc5ab8d-c1c2-4ca3-804b-c61066a62cb4/1721330510132-insurance-card-front.jpeg',\n  backUrl = 'https://testing.project-api.zapehr.com/v1/z3/local-insurance-cards/2bc5ab8d-c1c2-4ca3-804b-c61066a62cb4/1721330518576-insurance-card-back.jpeg',\n  frontContentType = 'image/jpeg',\n  backContentType = 'image/jpeg',\n  tagCode = 'IN-PERSON',\n  type = {\n    system: 'http://loinc.org',\n    code: '64290-0',\n    display: 'Health insurance card',\n    text: 'Insurance cards',\n  },\n}: DocumentReferenceParams): DocumentReference {\n  return {\n    resourceType: 'DocumentReference',\n    meta: {\n      tag: [\n        {\n          code: tagCode, // these are not module-scoped resources; this tag should be unnecessary\n        },\n      ],\n    },\n    status,\n    type: {\n      coding: [\n        {\n          system: type.system,\n          code: type.code,\n          display: type.display,\n        },\n      ],\n      text: type.text,\n    },\n    date,\n    content: [\n      {\n        attachment: {\n          url: frontUrl,\n          contentType: frontContentType,\n          title: 'insurance-card-front',\n        },\n      },\n      ...(backUrl\n        ? [\n            {\n              attachment: {\n                url: backUrl,\n                contentType: backContentType,\n                title: 'insurance-card-back',\n              },\n            },\n          ]\n        : []),\n    ],\n    context: {\n      related: [\n        {\n          reference: `Patient/${patientId}`,\n        },\n        {\n          reference: `Appointment/${appointmentId}`,\n        },\n      ],\n    },\n  };\n}\n"]}