{"version":3,"file":"patient.js","sourceRoot":"","sources":["patient.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAeA,sCA2DC;AA3DD,SAAgB,aAAa,CAAC,EAWd;QAVd,SAAS,eAAA,EACT,QAAQ,cAAA,EACR,MAAM,YAAA,EACN,SAAS,eAAA,EACT,IAAI,UAAA,EACJ,IAAI,UAAA,EACJ,KAAK,WAAA,EACL,UAAU,gBAAA,EACV,OAAO,aAAA,EACP,oBAAgC,EAAhC,YAAY,mBAAG,iBAAiB,KAAA;IAEhC,IAAM,IAAI,GAAc;QACtB,KAAK,EAAE,CAAC,SAAS,CAAC;QAClB,MAAM,EAAE,QAAQ;KACjB,CAAC;IAEF,IAAM,OAAO,GACX,IAAI,IAAI,IAAI,IAAI,KAAK,IAAI,UAAU;QACjC,CAAC,yCACM,CAAC,IAAI,IAAI,EAAE,IAAI,MAAA,EAAE,CAAC,GAClB,CAAC,IAAI,IAAI,EAAE,IAAI,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,GAC1B,CAAC,KAAK,IAAI,EAAE,KAAK,OAAA,EAAE,CAAC,GACpB,CAAC,UAAU,IAAI,EAAE,UAAU,YAAA,EAAE,CAAC,EAErC,CAAC,CAAC,SAAS,CAAC;IAEhB,IAAM,kBAAkB,GAAW;QACjC,IAAI,EAAE,YAAY;QAClB,MAAM,EAAE,8DAA8D;QACtE,OAAO,EAAE,YAAY;KACtB,CAAC;IAEF,IAAM,mBAAmB,GAAoB;QAC3C,MAAM,EAAE,CAAC,kBAAkB,CAAC;KAC7B,CAAC;IAEF,OAAO;QACL,YAAY,EAAE,SAAS;QACvB,IAAI,EAAE,CAAC,IAAI,CAAC;QACZ,MAAM,EAAE,IAAI;QACZ,MAAM,QAAA;QACN,OAAO,EAAE;kCAEF,CAAC,OAAO,IAAI,EAAE,OAAO,SAAA,EAAE,CAAC,KAC3B,OAAO,EAAE,OAAO,EAChB,YAAY,EAAE,CAAC,mBAAmB,CAAC;SAEtC;QACD,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS;QACxC,OAAO,EAAE,OAAO;QAChB,SAAS,WAAA;QACT,SAAS,EAAE;YACT;gBACE,GAAG,EAAE,2DAA2D;gBAChE,WAAW,EAAE,YAAY;aAC1B;SACF;KACF,CAAC;AACJ,CAAC","sourcesContent":["import { Address, CodeableConcept, Coding, ContactPoint, HumanName, Patient } from 'fhir/r4';\n\nexport interface PatientParams {\n  firstName: string;\n  lastName: string;\n  gender: Patient['gender'];\n  birthDate: string;\n  city?: string;\n  line?: string;\n  state?: string;\n  postalCode?: string;\n  telecom?: ContactPoint[];\n  relationship?: string;\n}\n\nexport function createPatient({\n  firstName,\n  lastName,\n  gender,\n  birthDate,\n  city,\n  line,\n  state,\n  postalCode,\n  telecom,\n  relationship = 'Parent/Guardian',\n}: PatientParams): Patient {\n  const name: HumanName = {\n    given: [firstName],\n    family: lastName,\n  };\n\n  const address: Address | undefined =\n    city || line || state || postalCode\n      ? {\n          ...(city && { city }),\n          ...(line && { line: [line] }),\n          ...(state && { state }),\n          ...(postalCode && { postalCode }),\n        }\n      : undefined;\n\n  const relationshipCoding: Coding = {\n    code: relationship,\n    system: 'https://fhir.zapehr.com/r4/StructureDefinitions/relationship',\n    display: relationship,\n  };\n\n  const relationshipConcept: CodeableConcept = {\n    coding: [relationshipCoding],\n  };\n\n  return {\n    resourceType: 'Patient',\n    name: [name],\n    active: true,\n    gender,\n    contact: [\n      {\n        ...(address && { address }),\n        telecom: telecom,\n        relationship: [relationshipConcept],\n      },\n    ],\n    address: address ? [address] : undefined,\n    telecom: telecom,\n    birthDate,\n    extension: [\n      {\n        url: 'https://fhir.zapehr.com/r4/StructureDefinitions/form-user',\n        valueString: relationship,\n      },\n    ],\n  };\n}\n"]}