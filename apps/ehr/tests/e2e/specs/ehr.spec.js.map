{"version":3,"file":"ehr.spec.js","sourceRoot":"","sources":["ehr.spec.ts"],"names":[],"mappings":"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","sourcesContent":["import { expect, Page, test } from '@playwright/test';\nimport { DateTime } from 'luxon';\nimport { formatDOB } from 'utils';\nimport { dataTestIds } from '../../../src/constants/data-test-ids';\nimport { ENV_LOCATION_NAME } from '../../e2e-utils/resource/constants';\nimport {\n  PATIENT_BIRTH_DATE_SHORT,\n  PATIENT_BIRTHDAY,\n  PATIENT_CITY,\n  PATIENT_EMAIL,\n  PATIENT_FIRST_NAME,\n  PATIENT_GENDER,\n  PATIENT_LAST_NAME,\n  PATIENT_LINE,\n  PATIENT_LINE_2,\n  PATIENT_PHONE_NUMBER,\n  PATIENT_POSTAL_CODE,\n  PATIENT_STATE,\n  ResourceHandler,\n} from '../../e2e-utils/resource-handler';\nimport { expectPatientInformationPage } from '../page/PatientInformationPage';\nimport { expectPatientsPage } from '../page/PatientsPage';\nimport { openVisitsPage } from '../page/VisitsPage';\n\n// We may create new instances for the tests with mutable operations, and keep parallel tests isolated\nconst PROCESS_ID = `ehr.spec.ts-${DateTime.now().toMillis()}`;\nconst resourceHandler = new ResourceHandler(PROCESS_ID);\n\nconst awaitCSSHeaderInit = async (page: Page): Promise<void> => {\n  await expect(async () => {\n    const content = await page.getByTestId(dataTestIds.cssHeader.container).textContent();\n    return content?.includes(resourceHandler.patient.name![0].family!) ?? false;\n  }).toPass({ timeout: 30_000 });\n};\n\ntest.beforeAll(async () => {\n  if (process.env.INTEGRATION_TEST === 'true') {\n    await resourceHandler.setResourcesFast();\n  } else {\n    await resourceHandler.setResources();\n    await resourceHandler.waitTillAppointmentPreprocessed(resourceHandler.appointment.id!);\n  }\n});\n\ntest.afterAll(async () => {\n  await resourceHandler.cleanupResources();\n});\n\ntest('Happy path: set up filters and navigate to visit page', async ({ page }) => {\n  const visitsPage = await openVisitsPage(page);\n\n  // INITIAL DATA IS LOADED\n  await expect(page.getByTestId('PersonIcon')).toBeVisible();\n  await expect(page.getByTestId(dataTestIds.dashboard.addPatientButton)).toBeVisible({ timeout: 15000 });\n  await expect(page.getByTestId(dataTestIds.header.userName)).toBeAttached({ timeout: 15000 });\n\n  // CHOOSE DATE\n  await page.waitForSelector('button[aria-label*=\"Choose date\"]');\n  await page.click('button[aria-label*=\"Choose date\"]');\n  await page.getByTestId(dataTestIds.dashboard.datePickerTodayButton).locator('button').click();\n\n  await visitsPage.selectLocation(ENV_LOCATION_NAME!);\n  await visitsPage.clickPrebookedTab();\n  await visitsPage.clickArrivedButton(resourceHandler.appointment.id!);\n  await visitsPage.clickInOfficeTab();\n  await visitsPage.clickIntakeButton(resourceHandler.appointment.id!);\n\n  // todo: commenting out cause it doesn't work in CI, need to investigate why, locally runs fine every time\n  // // GOTO VISIT PAGE\n  // await page.getByTestId(dataTestIds.dashboard.tableRowStatus(resourceHandler.appointment.id!)).click();\n\n  // // CHECK THE URL CHANGED\n  // await page.waitForURL(`/visit/${resourceHandler.appointment.id}`);\n\n  // // PATIENT NAME IS DISPLAYED\n  // await expect(page.getByTestId(dataTestIds.appointmentPage.patientFullName)).toContainText(\n  //   resourceHandler.patient.name![0].family!\n  // );\n});\n\ntest('CSS intake patient page is available', async ({ page }) => {\n  await page.goto(`in-person/${resourceHandler.appointment.id}/patient-info`);\n  await awaitCSSHeaderInit(page);\n});\n\ntest('CSS intake screening-questions page is available', async ({ page }) => {\n  await page.goto(`/in-person/${resourceHandler.appointment.id}/screening-questions`);\n  await awaitCSSHeaderInit(page);\n});\n\ntest('CSS intake vitals page is available', async ({ page }) => {\n  await page.goto(`in-person/${resourceHandler.appointment.id}/vitals`);\n  await awaitCSSHeaderInit(page);\n});\n\ntest('CSS intake allergies page is available', async ({ page }) => {\n  await page.goto(`in-person/${resourceHandler.appointment.id}/allergies`);\n  await awaitCSSHeaderInit(page);\n});\n\ntest('CSS intake medications page is available', async ({ page }) => {\n  await page.goto(`in-person/${resourceHandler.appointment.id}/medications`);\n  await awaitCSSHeaderInit(page);\n});\n\ntest('CSS intake medical conditions page is available', async ({ page }) => {\n  await page.goto(`in-person/${resourceHandler.appointment.id}/medical-conditions`);\n  await awaitCSSHeaderInit(page);\n});\n\ntest('CSS intake surgical history page is available', async ({ page }) => {\n  await page.goto(`in-person/${resourceHandler.appointment.id}/surgical-history`);\n  await awaitCSSHeaderInit(page);\n});\n\ntest('CSS intake hospitalization page is available', async ({ page }) => {\n  await page.goto(`in-person/${resourceHandler.appointment.id}/hospitalization`);\n  await awaitCSSHeaderInit(page);\n});\n\ntest('CSS intake external lab orders page is available', async ({ page }) => {\n  await page.goto(`in-person/${resourceHandler.appointment.id}/external-lab-orders`);\n  await awaitCSSHeaderInit(page);\n});\n\ntest('CSS intake assessment page is available', async ({ page }) => {\n  await page.goto(`in-person/${resourceHandler.appointment.id}/assessment`);\n  await awaitCSSHeaderInit(page);\n});\n\ntest.describe('Patient search', () => {\n  const patientData = {\n    firstName: PATIENT_FIRST_NAME,\n    lastName: PATIENT_LAST_NAME,\n    dateOfBirth: PATIENT_BIRTH_DATE_SHORT,\n    email: PATIENT_EMAIL,\n    phoneNumber: PATIENT_PHONE_NUMBER,\n    address:\n      PATIENT_LINE + ', ' + PATIENT_LINE_2 + ', ' + PATIENT_CITY + '\\n' + PATIENT_STATE + ' ' + PATIENT_POSTAL_CODE,\n  };\n\n  test('Search by Last name', async ({ page }) => {\n    await page.goto('/patients');\n\n    const patientsPage = await expectPatientsPage(page);\n    await patientsPage.searchByLastName(PATIENT_LAST_NAME);\n    await patientsPage.clickSearchButton();\n    await patientsPage.verifyPatientPresent({\n      ...patientData,\n      id: resourceHandler.patient.id!,\n    });\n  });\n\n  test('Search by First name', async ({ page }) => {\n    await page.goto('/patients');\n\n    const patientsPage = await expectPatientsPage(page);\n    await patientsPage.searchByGivenNames(PATIENT_FIRST_NAME);\n    await patientsPage.clickSearchButton();\n    await patientsPage.verifyPatientPresent({\n      ...patientData,\n      id: resourceHandler.patient.id!,\n    });\n  });\n\n  test('Search by Date of birth', async ({ page }) => {\n    await page.goto('/patients');\n\n    const patientsPage = await expectPatientsPage(page);\n    await patientsPage.searchByDateOfBirth(PATIENT_BIRTH_DATE_SHORT);\n    await patientsPage.clickSearchButton();\n    await patientsPage.verifyPatientPresent({\n      ...patientData,\n      id: resourceHandler.patient.id!,\n    });\n  });\n\n  test('Search by Phone number', async ({ page }) => {\n    await page.goto('/patients');\n\n    const patientsPage = await expectPatientsPage(page);\n    await patientsPage.searchByMobilePhone(PATIENT_PHONE_NUMBER);\n    await patientsPage.clickSearchButton();\n    await patientsPage.verifyPatientPresent({\n      ...patientData,\n      id: resourceHandler.patient.id!,\n    });\n  });\n\n  test.skip('Search by Address', { tag: '@flaky' }, async ({ page }) => {\n    await page.goto('/patients');\n\n    const patientsPage = await expectPatientsPage(page);\n    await patientsPage.searchByAddress(PATIENT_LINE.substring(0, 6));\n    await patientsPage.clickSearchButton();\n    await patientsPage.verifyPatientPresent({\n      ...patientData,\n      id: resourceHandler.patient.id!,\n    });\n  });\n\n  test('Search by Email', async ({ page }) => {\n    await page.goto('/patients');\n\n    const patientsPage = await expectPatientsPage(page);\n    await patientsPage.searchByEmail(PATIENT_EMAIL.split('@')[0]);\n    await patientsPage.clickSearchButton();\n    await patientsPage.verifyPatientPresent({\n      ...patientData,\n      id: resourceHandler.patient.id!,\n    });\n  });\n\n  test('Search by Last name and First name', async ({ page }) => {\n    await page.goto('/patients');\n\n    const patientsPage = await expectPatientsPage(page);\n    await patientsPage.searchByLastName(PATIENT_LAST_NAME);\n    await patientsPage.searchByGivenNames(PATIENT_FIRST_NAME);\n    await patientsPage.clickSearchButton();\n    await patientsPage.verifyPatientPresent({\n      ...patientData,\n      id: resourceHandler.patient.id!,\n    });\n  });\n\n  test('Search by Last name and Date of birth', async ({ page }) => {\n    await page.goto('/patients');\n\n    const patientsPage = await expectPatientsPage(page);\n    await patientsPage.searchByLastName(PATIENT_LAST_NAME);\n    await patientsPage.searchByDateOfBirth(PATIENT_BIRTH_DATE_SHORT);\n    await patientsPage.clickSearchButton();\n    await patientsPage.verifyPatientPresent({\n      ...patientData,\n      id: resourceHandler.patient.id!,\n    });\n  });\n\n  test('Search by Last name and Address', async ({ page }) => {\n    await page.goto('/patients');\n\n    const patientsPage = await expectPatientsPage(page);\n    await patientsPage.searchByLastName(PATIENT_LAST_NAME);\n    await patientsPage.searchByAddress(PATIENT_CITY);\n    await patientsPage.clickSearchButton();\n    await patientsPage.verifyPatientPresent({\n      ...patientData,\n      id: resourceHandler.patient.id!,\n    });\n  });\n\n  test('Search by Last name and Phone number', async ({ page }) => {\n    await page.goto('/patients');\n\n    const patientsPage = await expectPatientsPage(page);\n    await patientsPage.searchByLastName(PATIENT_LAST_NAME);\n    await patientsPage.searchByMobilePhone(PATIENT_PHONE_NUMBER);\n    await patientsPage.clickSearchButton();\n    await patientsPage.verifyPatientPresent({\n      ...patientData,\n      id: resourceHandler.patient.id!,\n    });\n  });\n\n  test('Search by Last name, First name and Date of birth', async ({ page }) => {\n    await page.goto('/patients');\n\n    const patientsPage = await expectPatientsPage(page);\n    await patientsPage.searchByLastName(PATIENT_LAST_NAME);\n    await patientsPage.searchByGivenNames(PATIENT_FIRST_NAME);\n    await patientsPage.searchByDateOfBirth(PATIENT_BIRTH_DATE_SHORT);\n    await patientsPage.clickSearchButton();\n    await patientsPage.verifyPatientPresent({\n      ...patientData,\n      id: resourceHandler.patient.id!,\n    });\n  });\n\n  test('Reset filters', async ({ page }) => {\n    await page.goto('/patients');\n\n    const patientsPage = await expectPatientsPage(page);\n    await patientsPage.searchByLastName(PATIENT_LAST_NAME);\n    await patientsPage.searchByGivenNames(PATIENT_FIRST_NAME);\n    await patientsPage.searchByDateOfBirth(PATIENT_BIRTH_DATE_SHORT);\n    await patientsPage.searchByMobilePhone(PATIENT_PHONE_NUMBER);\n    await patientsPage.searchByAddress(PATIENT_CITY);\n    await patientsPage.searchByEmail(PATIENT_EMAIL.split('@')[0]);\n    await patientsPage.clickResetFiltersButton();\n    await patientsPage.verifyFilterReset();\n  });\n});\n\ntest.describe('Patient header tests', () => {\n  test.afterAll(async () => {\n    await resourceHandler.cleanupResources();\n  });\n\n  test.beforeEach(async ({ page }) => {\n    await page.goto('/patient/' + resourceHandler.patient.id + '/info');\n  });\n\n  const HEADER_PATIENT_BIRTHDAY = formatDOB(PATIENT_BIRTHDAY)!;\n  const HEADER_PATIENT_GENDER = 'Male';\n  const HEADER_PATIENT_NAME = PATIENT_LAST_NAME + ', ' + PATIENT_FIRST_NAME;\n\n  test('Check header info', async ({ page }) => {\n    const patientInformationPage = await expectPatientInformationPage(page, resourceHandler.patient.id!);\n    const patientHeader = patientInformationPage.getPatientHeader();\n    await patientHeader.verifyHeaderPatientID('PID: ' + resourceHandler.patient.id);\n    await patientHeader.verifyHeaderPatientName(HEADER_PATIENT_NAME);\n    await patientHeader.verifyHeaderPatientBirthSex(HEADER_PATIENT_GENDER);\n    await patientHeader.verifyHeaderPatientBirthday(HEADER_PATIENT_BIRTHDAY);\n  });\n\n  test('Check patient info', async ({ page }) => {\n    const patientInformationPage = await expectPatientInformationPage(page, resourceHandler.patient.id!);\n    await patientInformationPage.verifyPatientLastName(PATIENT_LAST_NAME);\n    await patientInformationPage.verifyPatientFirstName(PATIENT_FIRST_NAME);\n    await patientInformationPage.verifyPatientDateOfBirth(PATIENT_BIRTH_DATE_SHORT);\n    await patientInformationPage.verifyPatientBirthSex(PATIENT_GENDER);\n  });\n});\n"]}