{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,oEAAmE;AACnE,+BAOe;AAEf,IAAM,cAAc,GAAG;;;;;gBACrB,0BAA0B;gBAC1B,OAAO,CAAC,GAAG,CAAC,uCAAuC,CAAC,CAAC;gBAC/C,iBAAiB,GAAG,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC;gBACpD,QAAQ,GAAG,IAAA,iBAAS,EAAC,mBAAW,CAAC,QAAQ,EAAE,OAAO,CAAC,GAAc,CAAC,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;gBACxF,WAAW,GAAG,IAAA,iBAAS,EAAC,mBAAW,CAAC,WAAW,EAAE,OAAO,CAAC,GAAc,CAAC,CAAC;gBACjE,qBAAM,IAAA,6BAAa,GAAE,EAAA;;gBAA7B,KAAK,GAAG,SAAqB;gBAC7B,OAAO,GAAG,IAAA,2BAAmB,EAAC,KAAK,EAAE,QAAQ,EAAE,WAAW,CAAC,CAAC;gBAClE,qBAAM,IAAA,6BAAqB,EACzB,EAAE,MAAM,EAAE,2CAAmC,EAAE,IAAI,EAAE,mBAAY,iBAAiB,CAAE,EAAE,EACtF,OAAO,CACR,EAAA;;gBAHD,SAGC,CAAC;;;;KACH,CAAC;AACF,kBAAe,cAAc,CAAC","sourcesContent":["import { getAuth0Token } from 'tests/e2e-utils/auth/getAuth0Token';\nimport {\n  cleanAppointmentGraph,\n  createOystehrClient,\n  E2E_TEST_RESOURCE_PROCESS_ID_SYSTEM,\n  getSecret,\n  Secrets,\n  SecretsKeys,\n} from 'utils';\n\nconst globalTeardown = async (): Promise<void> => {\n  // Global setup logic here\n  console.log('Running global teardown for EHR tests');\n  const playwrightSuiteId = process.env.PLAYWRIGHT_SUITE_ID;\n  const FHIR_API = getSecret(SecretsKeys.FHIR_API, process.env as Secrets).replace(/\\/r4/g, '');\n  const PROJECT_API = getSecret(SecretsKeys.PROJECT_API, process.env as Secrets);\n  const token = await getAuth0Token();\n  const oystehr = createOystehrClient(token, FHIR_API, PROJECT_API);\n  await cleanAppointmentGraph(\n    { system: E2E_TEST_RESOURCE_PROCESS_ID_SYSTEM, code: `failsafe-${playwrightSuiteId}` },\n    oystehr\n  );\n};\nexport default globalTeardown;\n"]}