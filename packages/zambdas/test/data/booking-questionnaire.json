{
  "resourceType": "Questionnaire",
  "url": "https://ottehr.com/FHIR/Questionnaire/book-appointment",
  "version": "1.0.0",
  "name": "BookAppointmentQuestionnaire",
  "title": "Book Appointment Form",
  "status": "active",
  "item": [
    {
      "linkId": "patient-information-page",
      "type": "group",
      "text": "About the patient",
      "item": [
        {
          "linkId": "patient-first-name",
          "type": "string",
          "text": "First name (legal)",
          "required": false,
          "enableWhen": [
            {
              "question": "existing-patient-id",
              "operator": "exists",
              "answerBoolean": false
            }
          ],
          "extension": [
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/disabled-display",
              "valueString": "hidden"
            },
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when",
              "extension": [
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-question",
                  "valueString": "existing-patient-id"
                },
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-operator",
                  "valueString": "exists"
                },
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-answer",
                  "valueBoolean": false
                }
              ]
            }
          ]
        },
        {
          "linkId": "patient-middle-name",
          "type": "string",
          "text": "Middle name (legal)",
          "required": false,
          "enableWhen": [
            {
              "question": "existing-patient-id",
              "operator": "exists",
              "answerBoolean": false
            }
          ],
          "extension": [
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/disabled-display",
              "valueString": "hidden"
            }
          ]
        },
        {
          "linkId": "patient-last-name",
          "type": "string",
          "text": "Last name (legal)",
          "required": false,
          "enableWhen": [
            {
              "question": "existing-patient-id",
              "operator": "exists",
              "answerBoolean": false
            }
          ],
          "extension": [
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/disabled-display",
              "valueString": "hidden"
            },
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when",
              "extension": [
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-question",
                  "valueString": "existing-patient-id"
                },
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-operator",
                  "valueString": "exists"
                },
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-answer",
                  "valueBoolean": false
                }
              ]
            }
          ]
        },
        {
          "linkId": "patient-preferred-name",
          "type": "string",
          "text": "Chosen or preferred name (optional)",
          "required": false
        },
        {
          "linkId": "patient-birthdate",
          "type": "date",
          "text": "Date of birth",
          "required": false,
          "enableWhen": [
            {
              "question": "existing-patient-id",
              "operator": "exists",
              "answerBoolean": false
            }
          ],
          "extension": [
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/data-type",
              "valueString": "DOB"
            },
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when",
              "extension": [
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-question",
                  "valueString": "existing-patient-id"
                },
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-operator",
                  "valueString": "exists"
                },
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-answer",
                  "valueBoolean": false
                }
              ]
            }
          ]
        },
        {
          "linkId": "patient-birth-sex",
          "type": "choice",
          "text": "Birth sex",
          "required": true,
          "answerOption": [
            {
              "valueString": "Male"
            },
            {
              "valueString": "Female"
            },
            {
              "valueString": "Intersex"
            }
          ]
        },
        {
          "linkId": "patient-ssn",
          "type": "string",
          "text": "SSN",
          "required": false,
          "enableWhen": [
            {
              "question": "should-display-ssn-field",
              "operator": "=",
              "answerBoolean": true
            }
          ],
          "extension": [
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/data-type",
              "valueString": "SSN"
            },
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/disabled-display",
              "valueString": "hidden"
            },
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when",
              "extension": [
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-question",
                  "valueString": "ssn-field-required"
                },
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-operator",
                  "valueString": "="
                },
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-answer",
                  "valueBoolean": true
                }
              ]
            }
          ]
        },
        {
          "linkId": "patient-email",
          "type": "string",
          "text": "Email",
          "required": true,
          "extension": [
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/data-type",
              "valueString": "Email"
            }
          ]
        },
        {
          "linkId": "reason-for-visit",
          "type": "choice",
          "text": "Reason for visit",
          "required": false,
          "answerOption": [
            {
              "valueString": "Cough and/or congestion"
            },
            {
              "valueString": "Throat pain"
            },
            {
              "valueString": "Eye concern"
            },
            {
              "valueString": "Fever"
            },
            {
              "valueString": "Ear pain"
            },
            {
              "valueString": "Vomiting and/or diarrhea"
            },
            {
              "valueString": "Abdominal (belly) pain"
            },
            {
              "valueString": "Rash or skin issue"
            },
            {
              "valueString": "Urinary problem"
            },
            {
              "valueString": "Breathing problem"
            },
            {
              "valueString": "Injury to arm"
            },
            {
              "valueString": "Injury to leg"
            },
            {
              "valueString": "Injury to head"
            },
            {
              "valueString": "Injury (Other)"
            },
            {
              "valueString": "Cut to arm or leg"
            },
            {
              "valueString": "Cut to face or head"
            },
            {
              "valueString": "Removal of sutures/stitches/staples"
            },
            {
              "valueString": "Choked or swallowed something"
            },
            {
              "valueString": "Allergic reaction to medication or food"
            },
            {
              "valueString": "Auto accident"
            },
            {
              "valueString": "Other"
            }
          ],
          "enableWhen": [
            {
              "question": "appointment-service-category",
              "operator": "=",
              "answerString": "urgent-care"
            },
            {
              "question": "appointment-service-category",
              "operator": "exists",
              "answerBoolean": false
            }
          ],
          "enableBehavior": "any",
          "extension": [
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/disabled-display",
              "valueString": "hidden"
            },
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when",
              "extension": [
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-question",
                  "valueString": "appointment-service-category"
                },
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-operator",
                  "valueString": "="
                },
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-answer",
                  "valueString": "urgent-care"
                }
              ]
            },
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when",
              "extension": [
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-question",
                  "valueString": "appointment-service-category"
                },
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-operator",
                  "valueString": "exists"
                },
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-answer",
                  "valueBoolean": false
                }
              ]
            }
          ]
        },
        {
          "linkId": "reason-for-visit-om",
          "type": "choice",
          "text": "Reason for visit",
          "required": false,
          "answerOption": [
            {
              "valueString": "Injury"
            },
            {
              "valueString": "Testing"
            },
            {
              "valueString": "Physical"
            }
          ],
          "enableWhen": [
            {
              "question": "appointment-service-category",
              "operator": "=",
              "answerString": "occupational-medicine"
            }
          ],
          "extension": [
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/disabled-display",
              "valueString": "hidden"
            },
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when",
              "extension": [
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-question",
                  "valueString": "appointment-service-category"
                },
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-operator",
                  "valueString": "="
                },
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-answer",
                  "valueString": "occupational-medicine"
                }
              ]
            }
          ]
        },
        {
          "linkId": "reason-for-visit-wc",
          "type": "choice",
          "text": "Reason for visit",
          "required": false,
          "answerOption": [
            {
              "valueString": "New injury"
            },
            {
              "valueString": "Follow-up"
            }
          ],
          "enableWhen": [
            {
              "question": "appointment-service-category",
              "operator": "=",
              "answerString": "workmans-comp"
            }
          ],
          "extension": [
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/disabled-display",
              "valueString": "hidden"
            },
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when",
              "extension": [
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-question",
                  "valueString": "appointment-service-category"
                },
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-operator",
                  "valueString": "="
                },
                {
                  "url": "https://fhir.zapehr.com/r4/StructureDefinitions/require-when-answer",
                  "valueString": "workmans-comp"
                }
              ]
            }
          ]
        },
        {
          "linkId": "tell-us-more",
          "type": "string",
          "text": "Tell us more (optional)",
          "required": false
        },
        {
          "linkId": "authorized-non-legal-guardian",
          "type": "string",
          "text": "Who, besides the parent or legal guardian, is allowed to bring in the patient?",
          "required": false
        },
        {
          "linkId": "should-display-ssn-field",
          "type": "boolean",
          "required": true,
          "readOnly": true,
          "initial": [
            {
              "valueBoolean": false
            }
          ],
          "extension": [
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/disabled-display",
              "valueString": "hidden"
            }
          ]
        },
        {
          "linkId": "ssn-field-required",
          "type": "boolean",
          "required": true,
          "readOnly": true,
          "extension": [
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/disabled-display",
              "valueString": "hidden"
            }
          ]
        },
        {
          "linkId": "existing-patient-id",
          "type": "string",
          "required": true,
          "readOnly": true,
          "extension": [
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/disabled-display",
              "valueString": "hidden"
            }
          ]
        },
        {
          "linkId": "appointment-service-category",
          "type": "string",
          "required": true,
          "readOnly": true,
          "extension": [
            {
              "url": "https://fhir.zapehr.com/r4/StructureDefinitions/disabled-display",
              "valueString": "hidden"
            }
          ]
        }
      ]
    }
  ]
}
